[{"categories":["Algorithm"],"content":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®éš¾åº¦ï¼šä¸­ç­‰ æŒæ¡ç¨‹åº¦ï¼šğŸŒŸğŸŒŸğŸŒŸğŸŒŸ\n59. èºæ—‹çŸ©é˜µ II - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™ä½ ä¸€ä¸ªæ­£æ•´æ•° n ï¼Œç”Ÿæˆä¸€ä¸ªåŒ…å« 1 åˆ° n2 æ‰€æœ‰å…ƒç´ ï¼Œä¸”å…ƒç´ æŒ‰é¡ºæ—¶é’ˆé¡ºåºèºæ—‹æ’åˆ—çš„ n x n æ­£æ–¹å½¢çŸ©é˜µ matrix ã€‚\nç¤ºä¾‹ 1ï¼š\n1 2 3 8 9 4 7 6 5 è¾“å…¥ï¼šn = 3 è¾“å‡ºï¼š[[1,2,3],[8,9,4],[7,6,5]] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šn = 1 è¾“å‡ºï¼š\\[[1]\\]\næç¤ºï¼š\n1 \u003c= n \u003c= 20\nè§£é¢˜æ€è·¯ æ¨¡æ‹Ÿï¼Œèˆå¾—ç”¨å˜é‡ï¼Œç”¨ 4 ä¸ªå˜é‡åˆ†åˆ«æ§åˆ¶ ä¸Šã€ä¸‹ã€å·¦ã€å³ å››ä¸ªè¾¹ç•Œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 class Solution { public int[][] generateMatrix(int n) { int[][] res = new int[n][n]; int num = 1; // ç¡®å®šè¾¹ç•ŒèŒƒå›´ int top = 0 , bottom = n-1; int left = 0 , right = n-1; while(num \u003c= n*n){ //top left -\u003e top right for(int i = left ; i \u003c= right ; i++){ res[top][i] = num++; } top++; //top right -\u003e bottom right for(int i = top ; i \u003c= bottom ; i++){ res[i][right] = num++; } right--; //bottom right -\u003e bottom left for(int i = right ; i \u003e= left ;i --){ res[bottom][i] = num++; } bottom--; //bottom left -\u003e top left for(int i = bottom ; i \u003e= top; i--){ res[i][left] = num++; } left++; } return res; } } ","description":"","tags":["alg@mock"],"title":"æ¯æ—¥ä¸€é¢˜20250207-LC59","uri":"/posts/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%9820250207-lc59/"},{"categories":["Algorithm"],"content":"é¢˜ç›®ä¿¡æ¯ é¢˜ç›®éš¾åº¦ï¼šmedium æŒæ¡ç¨‹åº¦ï¼šğŸŒŸğŸŒŸğŸŒŸ\n47. å…¨æ’åˆ— II - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™å®šä¸€ä¸ªå¯åŒ…å«é‡å¤æ•°å­—çš„åºåˆ— nums ï¼ŒæŒ‰ä»»æ„é¡ºåº è¿”å›æ‰€æœ‰ä¸é‡å¤çš„å…¨æ’åˆ—ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šnums = [1,1,2] è¾“å‡ºï¼š [[1,1,2], [1,2,1], [2,1,1]] ç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šnums = [1,2,3] è¾“å‡ºï¼š[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]\næç¤ºï¼š\n1 \u003c= nums.length \u003c= 8 -10 \u003c= nums[i] \u003c= 10\nè§£é¢˜æ€è·¯ å›æº¯ï¼Œåœ¨å…¨æ’åˆ—çš„åŸºç¡€ä¸ŠåŠ äº†ä¸¤ä¸ªæ‰©å±•ï¼Œ\nè¾“å…¥æ•°å­—æœ‰é‡å¤ ç»“æœéœ€è¦ä¸é‡å¤ éœ€è¦æƒ³åŠæ³•å»é‡ï¼Œæœ‰ä¸¤ä¸ªç­–ç•¥ï¼Œç›´æ¥æš´åŠ›å›æº¯ï¼Œç„¶åå¯¹ç»“æœç›´æ¥è¿›è¡Œä¸€æ¬¡å»é‡å³å¯\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 class Solution { private Set\u003cList\u003cInteger\u003e\u003e res; private List\u003cInteger\u003e path; private boolean[] visited; public List\u003cList\u003cInteger\u003e\u003e permuteUnique(int[] nums) { res = new HashSet\u003c\u003e(); path = new ArrayList\u003c\u003e(); visited = new boolean[nums.length]; backtrack(nums,nums.length); return new ArrayList\u003c\u003e(res); } private void backtrack(int[] nums,int n){ if(path.size() == n){ res.add(new ArrayList\u003c\u003e(path)); return; } for(int i = 0 ; i \u003c n ; i++){ if(!visited[i]){ path.add(nums[i]); visited[i] = true; backtrack(nums,n); visited[i] = false; path.remove(path.size()-1); } } } } ä¼˜åŒ– åœ¨ä¸ç”¨ set çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•å»é‡\nå…ˆçœ‹çœ‹æ˜¯å¦‚ä½•é‡å¤çš„ æ¯”å¦‚ [1,1,2], é‡å¤çš„è¯ï¼Œå°±ä¼šå‡ºç°ä¸¤ä¸ª [1,1,2]\nè€ƒè™‘é‡å¤å…ƒç´ ä¸€å®šè¦ ä¼˜å…ˆæ’åº ï¼Œå°†é‡å¤çš„éƒ½æ”¾åœ¨ä¸€èµ·ï¼Œä¾¿äºæ‰¾åˆ°é‡å¤å…ƒç´ å’Œå‰ªæï¼ï¼ï¼\nå½“å‰å…ƒç´ å’Œå‰ä¸€ä¸ªå…ƒç´ å€¼ç›¸åŒï¼ˆæ­¤å¤„éšå«è¿™ä¸ªå…ƒç´ çš„ index\u003e0 ï¼‰ï¼Œå¹¶ä¸”å‰ä¸€ä¸ªå…ƒç´ è¿˜æ²¡æœ‰è¢«ä½¿ç”¨è¿‡çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦å‰ªæ\nå³\n1 2 3 if(visited[i] || (i \u003e 0 \u0026\u0026 nums[i] == nums[i - 1] \u0026\u0026 !visited[i - 1]) ){ continue; } æœ€åç­”æ¡ˆ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 class Solution { private List\u003cList\u003cInteger\u003e\u003e res; private List\u003cInteger\u003e path; private boolean[] visited; public List\u003cList\u003cInteger\u003e\u003e permuteUnique(int[] nums) { res = new ArrayList\u003c\u003e(); path = new ArrayList\u003c\u003e(); visited = new boolean[nums.length]; Arrays.sort(nums); backtrack(nums,nums.length); return res; } private void backtrack(int[] nums,int n){ if(path.size() == n){ res.add(new ArrayList\u003c\u003e(path)); return; } for(int i = 0 ; i \u003c n ; i++){ if(visited[i] || (i \u003e 0 \u0026\u0026 nums[i] == nums[i - 1] \u0026\u0026 !visited[i - 1]) ){ continue; } path.add(nums[i]); visited[i] = true; backtrack(nums,n); visited[i] = false; path.remove(path.size()-1); } } } ç›¸å…³é¢˜ç›® å›æº¯æ’åˆ—çš„åŸºç¡€é¢˜ç›®\n46. å…¨æ’åˆ— - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nå›æº¯ç»„åˆçš„åŸºç¡€é¢˜ç›® 77. ç»„åˆ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\næ’åˆ—ä¸ç»„åˆçš„ä¸»è¦å·®å¼‚åœ¨äº\næ’åˆ—éœ€è¦ç»´æŠ¤ä¸€ä¸ª visited[] æ•°ç»„æ¥æ ‡è®°å½“å‰å…ƒç´ æ˜¯å¦å·²é€‰æ‹©ï¼Œç»„åˆéœ€è¦åœ¨å›æº¯è¿‡ç¨‹ä¸­ï¼Œæ§åˆ¶é€‰æ‹©åŒºé—´\n","description":"","tags":["alg@backtrack"],"title":"æ¯æ—¥ä¸€é¢˜20250206-LC47","uri":"/posts/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%9820250206-lc47/"},{"categories":["Life"],"content":"2024 ä¸€å¹´è¿‡å»äº†ï¼Œç®€å•çš„åšä¸ªæ€»ç»“ï¼Œè®°å½•ä¸€ä¸‹ 25 å¹´çš„è§„åˆ’å§\n24 å¹´ç›®æ ‡å®Œæˆ è€ƒå–æ— çº¿ç”µæ‰§ç…§ æ™‹å‡ è‹±è¯­å­¦ä¹  é˜…è¯» åšå®¢æ­å»º 24 å¹´æ¦‚å†µ æ—…æ¸¸ 4 æœˆåˆå»äº†ä¸€è¶Ÿæ–°è¥¿å…°ï¼Œæ€»ä½“æ„Ÿè§‰ç¡®å®ä¸é”™ï¼Œäººå°‘ï¼Œå°å›½å®¶ï¼Œç¯å¢ƒå¾ˆå¥½ï¼Œå†’é™©è€…çš„å¤©å ‚ï¼Œåœ¨ Tekapo ç¡®å®æ‹åˆ°äº†å‡ å¼ å¾ˆä¸é”™çš„çš„é“¶æ²³ç…§ç‰‡ï¼Œä¹Ÿç¬¬ä¸€æ¬¡ä½“éªŒåˆ°äº†å·´é›·ç‰¹çš„å¨åŠ›ï¼Œç¡®å®å¾ˆçˆ½ï¼Œè¦è¯´é—æ†¾çš„è¯ï¼Œå°±æ˜¯å¤©æ°”åŸå› å¯¼è‡´æ²¡èƒ½é£åº“å…‹å±±ã€‚æ€»ä½“æ¥è¯´ï¼Œ14 å¤©çš„è¡Œç¨‹å¦‚æœå—åŒ—å²›éƒ½é€›çš„è¯ï¼Œç›¸å¯¹æœ‰ä¸€äº›ç´§å¼ ï¼Œåé¢å‡ å¤©ï¼Œå¤šæ•°æ—¶é—´å°±æ˜¯åœ¨èµ¶è·¯äº†ï¼Œå¯ä»¥çš„è¯å—å²›è¿˜æ˜¯ä»çš‡åé•‡ç›´æ¥é£å¥¥å…‹å…°è·Ÿå®½æ¾ä¸€äº›ã€‚æ•´ä½“ä½“éªŒç¡®å®ä¸é”™ï¼Œæœ‰æœºä¼šå¯ä»¥å°è¯•å»è½¬ä¸€ä¸‹ã€‚\n10 æœˆä»½å›å®¶ï¼Œå°±å¸¦åª³å¦‡é¡ºé“å»äº†è¶Ÿä¸­å«ï¼Œæ„Ÿè§‰æ¯”å¾ˆå¤šå¹´å‰è¦å¥½ä¸Šä¸å°‘ï¼Œä½“éªŒäº†ä¸€æ™šæ˜Ÿæ˜Ÿé…’åº—ï¼Œè·Ÿæ²™ç–—ï¼Œé—æ†¾çš„è¯ï¼Œç¡®å®æ²¡æ—¶é—´å»ç©åšé»„æ²³æ»‘ç´¢ã€‚\n12 æœˆç¦»èŒäº†ï¼Œèµ°äº†å¹¿å·-ä½›å±±-ç æµ·-æ¾³é—¨-æ·±åœ³ï¼Œåƒåƒåƒï¼Œè¦è¯´æ„Ÿå—ï¼Œå¯èƒ½æ¾³é—¨ç»™æˆ‘çš„æ„Ÿè§¦æ˜¯æœ€å¤§çš„ï¼ŒèµŒåœºçš„æ´—æ‰‹é—´ã€å¸çƒŸå®¤ã€ä½ èƒ½çœ‹åˆ°å½¢å½¢è‰²è‰²çš„äººï¼Œæœ‰äº›äººï¼ŒçœŸçš„å°±åƒé™„éª¨ä¹‹è›†ï¼Œé—»ç€å‘³å°±æ¥äº†ï¼Œä¸ä½†ä¸æ‹‰äººä¸€æŠŠï¼Œè¿˜ä¼šåœ¨æ¨ä½ ç¦»æ·±æ¸Šæ›´è¿‘ä¸€äº›ï¼Œä½†æ˜¯è¿™éƒ½æ˜¯ä¸ªäººçš„é€‰æ‹©ï¼Œç¡®å®å¾ˆéš¾è¯„ä»·ã€‚\nå­¦ä¹  æ— çº¿ç”µæ²¡è€ƒä¸Šï¼Œä¸€ç›´æ²¡æœ‰çº¦åˆ°ï¼Œå¾ˆé—æ†¾ï¼Œæœ¬æ¥æ‰“ç®—è€ƒäº†è¯ï¼Œç»™è½¦ä¸Šè£…éƒ¨ç”µå°ç©ç©ï¼Œä¸€ç›´å°±æ²¡çº¦åˆ°ï¼Œæœ€è¿‘å‡ ä¸ªæœˆï¼Œä¹‹å‰çš„é¢˜ç›®éƒ½å¿˜å¾—å·®ä¸å¤šäº†ï¼Œä¼°è®¡å¾—é‡æ–°æ¥è¿‡\nè‹±è¯­,å»å¹´å•è¯æ‰“å¡äº† 187 å¤©ï¼Œä¸ç®—å¤ªå¥½ï¼Œç»§ç»­åŠªåŠ›å§\né˜…è¯»ï¼Œå»å¹´è¯»äº† 39 æœ¬ä¹¦ï¼Œè¯»å®Œçš„å°±åªæœ‰ 8 æœ¬ï¼Œç”±äºå…¥å‘æ‘„å½±ï¼Œ è®¤çœŸçš„è¯»å®Œäº† ã€Šæ–°æ‘„å½±ç¬”è®°ã€‹ï¼Œç®—æ˜¯ä¸€æœ¬ä¸é”™çš„å…¥é—¨ä¹¦ï¼Œè‡³å°‘èƒ½æ˜ç¡®ç†è§£æ‘„å½±ä¸‰è¦ç´ ï¼› è¿˜æœ‰1æœ¬ä¹±æ­¥çš„æ¨ç†å°è¯´é›†ï¼› ã€Šä»™ç—‡ã€‹æ˜¯çœ‹å®Œäº†è‘›å¤§çˆ·çš„ç”µå½±ï¼Œå›å»æ‰¾æ¥è¯»çš„ï¼Œé€¼ç–¯ä¸€ä¸ªäººçš„åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿæ—¶ä»£è¿˜æ˜¯åè§ï¼› ã€Šå¹³é¢å›½ã€‹å¾ˆéš¾æƒ³åˆ°è¿™æ˜¯ä¸€æœ¬ 100 å¤šå¹´å‰çš„ä¹¦ï¼Œé˜»æŒ¡æˆ‘ä»¬è®¤æ¸…ç°å®çš„åˆ°åº•æ˜¯ç»´åº¦è¿˜æ˜¯é˜¶çº§ï¼Ÿ ã€Šè½¯æŠ€èƒ½ã€‹ï¼Œçœ‹äº†è¿™æœ¬ä¹¦ï¼Œæ‰å†³å®šæŠŠæˆ‘çš„æ’­å®¢ç»™æ­èµ·æ¥ï¼› ã€Šæœˆäº®ä¸å…­ä¾¿å£«ã€‹ï¼Œåª³å¦‡ç‰¹åˆ«å–œæ¬¢è¿™æœ¬ä¹¦ï¼Œå°±çœ‹äº†ä¸‹ï¼Œä¸ç–¯é­”ä¸æˆæ´»ï¼Œå°±æ˜¯æˆ‘å¯¹ä¸»äººå…¬çš„è¯„ä»·ï¼› ã€Šæ¯å¤©éƒ½æƒ³é™ªä¼´ä½ ã€‹å¾ˆæ²»æ„ˆçš„å°æ¼«ç”»ã€‚\nã€ŠSICPã€‹è¿™éƒ¨å¤§éƒ¨å¤´,ç¡®å®éš¾å•ƒï¼Œçœ‹çœ‹ä»Šå¹´èƒ½ä¸èƒ½å•ƒä¸‹æ¥å§ ã€ŠDDIAã€‹ç¡®å®ä¸é”™ï¼Œä½†æ˜¯å…œå…œè½¬è½¬çš„ï¼Œä¹Ÿæ²¡å®Œå…¨çœ‹å®Œï¼Œä¸è¿‡é‡Œé¢ä»‹ç»çš„ä¸€äº›æ€æƒ³ï¼Œç¡®å®å¾ˆåº•å±‚æˆ–è€…å¸¸ç”¨ï¼Œæ¯”å¦‚ WAL ï¼Œè¿™ä¸ªåœ¨ä¸»æµ DB é‡Œï¼ŒåŸºæœ¬éƒ½æœ‰ç›¸åº”çš„å˜ä½“æ¥å®ç°ã€‚Redis çš„ AOF ï¼Œ InnoDB çš„ redo log ï¼Œ mongo çš„ jounal å…¶å®éƒ½æ˜¯ WAL å˜ä½“ã€‚\nå·¥ä½œ å…¶å®æ•´ä½“å·¥ä½œéƒ½åšçš„ä¸é”™ï¼Œæœ¬æ¥è¿˜æƒ³ 9 æœˆä»½èƒ½æ™‹å‡ï¼Œç»“æœæ²¡æåï¼Œ 11 æœˆï¼Œè·Ÿå…¬å¸ match ä¸€ä¸‹ï¼Œç¦»èŒäº†ã€‚\nå…¶ä»– ç¬”è®°è½¯ä»¶æŠ˜è…¾æ¥æŠ˜è…¾å»ï¼Œæœ€åè½¬åˆ°äº† emacs ï¼Œemacs è¿™ä¸ªå¤è‘£ç¡®å®æœ‰äº›ä¸œè¥¿ï¼Œæ’­å®¢ä¹Ÿè½¬åˆ° emacs ä¸Šï¼Œç»“åˆ hugo ï¼Œæ­å»ºèµ·æ¥äº†\nå¹´åº•ä¹°äº†ä¸ª breville çš„å’–å•¡æœºï¼Œçœ‹çœ‹èƒ½ä¸èƒ½å°‘å–ç‚¹æ˜Ÿå·´å…‹\n25 å¹´è®¡åˆ’ æ‰¾å·¥ä½œ è‹±è¯­å­¦ä¹ åšæŒæ‰“å¡ 300 å¤© é˜…è¯» LC éšç¼˜æ‰“å¡ï¼Œä½†æ˜¯ä¸ä½äº 100 å¤© çœ‹å®Œ ã€ŠDDIAã€‹ å•ƒå®Œ ã€ŠSICPã€‹ å’–å•¡èƒ½æ‹‰ä¸€ä¸ªä¸é”™çš„æ‹‰èŠ± è€ƒæ— çº¿ç”µæ‰§ç…§ è‹±è¯­è½¬åˆ°äº†å¤šé‚»å›½ï¼Œä½“æ„Ÿæ¯”å•çº¯çš„èƒŒå•è¯è¦å¥½ä¸å°‘ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½åšæŒä¸€æ•´å¹´ä¸\nçŸ­æœŸå†…çš„ç›®æ ‡è¿˜æ˜¯æ‰¾å·¥ä½œï¼ŒæœŸé—´çš„è¯ï¼Œå¯èƒ½ä¼šåˆ·åˆ·é¢˜ï¼Œç»´æŒä¸€ä¸‹åšå®¢çš„æ›´æ–°ï¼Œå¤šè¯»è¯»åŸºç¡€ä¸Šç±»çš„ä¹¦ç±ï¼Œè¡¥å……ä¸€ä¸‹çŸ­æ¿\nåŸºæœ¬ä¸Šå°±è¿™äº›äº†å¸Œæœ› 25 å¹´èƒ½é¡ºé¡ºåˆ©åˆ©å§\n","description":"","tags":null,"title":"å¹´ç»ˆæ€»ç»“","uri":"/posts/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/"},{"categories":["Algorithm"],"content":"é¢˜ç›®ä¿¡æ¯ æŒæ¡ç¨‹åº¦: ğŸŒŸ\n2944. è´­ä¹°æ°´æœéœ€è¦çš„æœ€å°‘é‡‘å¸æ•° - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™ä½ ä¸€ä¸ª ä¸‹æ ‡ä» 1 å¼€å§‹çš„ æ•´æ•°æ•°ç»„ prices ï¼Œå…¶ä¸­ prices[i] è¡¨ç¤ºä½ è´­ä¹°ç¬¬ i ä¸ªæ°´æœéœ€è¦èŠ±è´¹çš„é‡‘å¸æ•°ç›®ã€‚\næ°´æœè¶…å¸‚æœ‰å¦‚ä¸‹ä¿ƒé”€æ´»åŠ¨ï¼š\nå¦‚æœä½ èŠ±è´¹ prices[i] è´­ä¹°äº†ä¸‹æ ‡ä¸º i çš„æ°´æœï¼Œé‚£ä¹ˆä½ å¯ä»¥å…è´¹è·å¾—ä¸‹æ ‡èŒƒå›´åœ¨ [i + 1, i + i] çš„æ°´æœã€‚ æ³¨æ„ ï¼Œå³ä½¿ä½  å¯ä»¥ å…è´¹è·å¾—æ°´æœ j ï¼Œä½ ä»ç„¶å¯ä»¥èŠ±è´¹ prices[j] ä¸ªé‡‘å¸å»è´­ä¹°å®ƒä»¥è·å¾—å®ƒçš„å¥–åŠ±ã€‚\nè¯·ä½ è¿”å›è·å¾—æ‰€æœ‰æ°´æœæ‰€éœ€è¦çš„ æœ€å°‘ é‡‘å¸æ•°ã€‚\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šprices = [3,1,2]\nè¾“å‡ºï¼š4\nè§£é‡Šï¼š\nç”¨ prices[0] = 3 ä¸ªé‡‘å¸è´­ä¹°ç¬¬ 1 ä¸ªæ°´æœï¼Œä½ å¯ä»¥å…è´¹è·å¾—ç¬¬ 2 ä¸ªæ°´æœã€‚ ç”¨ prices[1] = 1 ä¸ªé‡‘å¸è´­ä¹°ç¬¬ 2 ä¸ªæ°´æœï¼Œä½ å¯ä»¥å…è´¹è·å¾—ç¬¬ 3 ä¸ªæ°´æœã€‚ å…è´¹è·å¾—ç¬¬ 3 ä¸ªæ°´æœã€‚ è¯·æ³¨æ„ï¼Œå³ä½¿æ‚¨å¯ä»¥å…è´¹è·å¾—ç¬¬ 2 ä¸ªæ°´æœä½œä¸ºè´­ä¹°ç¬¬ 1 ä¸ªæ°´æœçš„å¥–åŠ±ï¼Œä½†æ‚¨è´­ä¹°å®ƒæ˜¯ä¸ºäº†è·å¾—å…¶å¥–åŠ±ï¼Œè¿™æ˜¯æ›´ä¼˜åŒ–çš„ã€‚\nç¤ºä¾‹ 2ï¼š\nè¾“å…¥ï¼šprices = [1,10,1,1]\nè¾“å‡ºï¼š2\nè§£é‡Šï¼š\nç”¨ prices[0] = 1 ä¸ªé‡‘å¸è´­ä¹°ç¬¬ 1 ä¸ªæ°´æœï¼Œä½ å¯ä»¥å…è´¹è·å¾—ç¬¬ 2 ä¸ªæ°´æœã€‚ å…è´¹è·å¾—ç¬¬ 2 ä¸ªæ°´æœã€‚ ç”¨ prices[2] = 1 ä¸ªé‡‘å¸è´­ä¹°ç¬¬ 3 ä¸ªæ°´æœï¼Œä½ å¯ä»¥å…è´¹è·å¾—ç¬¬ 4 ä¸ªæ°´æœã€‚ å…è´¹è·å¾—ç¬¬ 4 ä¸ªæ°´æœã€‚ ç¤ºä¾‹ 3ï¼š\nè¾“å…¥ï¼šprices = [26,18,6,12,49,7,45,45]\nè¾“å‡ºï¼š39\nè§£é‡Šï¼š\nç”¨ prices[0] = 26 ä¸ªé‡‘å¸è´­ä¹°ç¬¬ 1 ä¸ªæ°´æœï¼Œä½ å¯ä»¥å…è´¹è·å¾—ç¬¬ 2 ä¸ªæ°´æœã€‚ å…è´¹è·å¾—ç¬¬ 2 ä¸ªæ°´æœã€‚ ç”¨ prices[2] = 6 ä¸ªé‡‘å¸è´­ä¹°ç¬¬ 3 ä¸ªæ°´æœï¼Œä½ å¯ä»¥å…è´¹è·å¾—ç¬¬ 4ï¼Œ5ï¼Œ6ï¼ˆæ¥ä¸‹æ¥çš„ä¸‰ä¸ªï¼‰æ°´æœã€‚ å…è´¹è·å¾—ç¬¬ 4 ä¸ªæ°´æœã€‚ å…è´¹è·å¾—ç¬¬ 5 ä¸ªæ°´æœã€‚ ç”¨ prices[5] = 7 ä¸ªé‡‘å¸è´­ä¹°ç¬¬ 6 ä¸ªæ°´æœï¼Œä½ å¯ä»¥å…è´¹è·å¾—ç¬¬ 7 å’Œ ç¬¬ 8 ä¸ªæ°´æœã€‚ å…è´¹è·å¾—ç¬¬ 7 ä¸ªæ°´æœã€‚ å…è´¹è·å¾—ç¬¬ 8 ä¸ªæ°´æœã€‚ è¯·æ³¨æ„ï¼Œå³ä½¿æ‚¨å¯ä»¥å…è´¹è·å¾—ç¬¬ 6 ä¸ªæ°´æœä½œä¸ºè´­ä¹°ç¬¬ 3 ä¸ªæ°´æœçš„å¥–åŠ±ï¼Œä½†æ‚¨è´­ä¹°å®ƒæ˜¯ä¸ºäº†è·å¾—å…¶å¥–åŠ±ï¼Œè¿™æ˜¯æ›´ä¼˜åŒ–çš„ã€‚\næç¤ºï¼š\n1 \u003c= prices.length \u003c= 1000 1 \u003c= prices[i] \u003c= 105\nè§£é¢˜æ€è·¯ å…ˆçœ‹çœ‹ case1 ï¼Œ å¦‚æœæˆ‘ä»¬è´­ä¹°äº† 0 ï¼Œè¿™ä¸ªæ—¶å€™æœ‰ä¸¤ä¸ªé€‰æ‹©\nå…è´¹è·å– 1 ï¼Œæˆ‘ä»¬åªèƒ½è´­ä¹° 2 , æ€»èŠ±è´¹æ˜¯ 5 ä¸å…è´¹è·å– 1 ï¼Œ æˆ‘ä»¬å…è´¹è·å– 2ï¼Œæ€»èŠ±è´¹æ˜¯ 4 æ‰€ä»¥æˆ‘ä»¬é€‰æ‹©ç¬¬äºŒç§æ–¹æ¡ˆï¼Œè¿™ç§æ–¹æ¡ˆä»£ä»·æœ€ä½\næˆ‘ä»¬éœ€è¦è€ƒè™‘çš„æ˜¯ï¼Œå¯¹äº dp[i] æˆ‘ä»¬å®šä¹‰å…¶å«ä¹‰ä¸º è´­ä¹°äº† i æ—¶ï¼Œè·å–ä» dp[i+1] åˆ° dp[2i] çš„æœ€å°èŠ±è´¹\nè®¡ç®— dp[i] ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®— j from [i+1] to [2i] ä¸­çš„æœ€å°èŠ±è´¹ï¼Œåœ¨åŠ ä¸Š price[i]\n\\[ \\text{dfs}(i) = \\text{prices}[i] + \\min_{j=i+1}^{2i+1} \\text{dfs}(j) \\]\nä»£ç å®ç° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 public int minimumCoins(int[] prices) { int n = prices.length; int[] memo = new int[(n + 1) / 2]; return dfs(1, prices, memo); } private int dfs(int i, int[] prices, int[] memo) { if (i * 2 \u003e= prices.length) { return prices[i - 1]; // i ä» 1 å¼€å§‹ } if (memo[i] != 0) { // ä¹‹å‰ç®—è¿‡ return memo[i]; } int res = Integer.MAX_VALUE; for (int j = i + 1; j \u003c= i * 2 + 1; j++) { res = Math.min(res, dfs(j, prices, memo)); } return memo[i] = res + prices[i - 1]; // è®°å¿†åŒ– } ","description":"","tags":["alg@dp"],"title":"æ¯æ—¥ä¸€é¢˜20250124-LC2944","uri":"/posts/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%9820250124-lc2944/"},{"categories":["Algorithm"],"content":"é¢˜ç›®ä¿¡æ¯ 1561. ä½ å¯ä»¥è·å¾—çš„æœ€å¤§ç¡¬å¸æ•°ç›® - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 æœ‰ 3n å †æ•°ç›®ä¸ä¸€çš„ç¡¬å¸ï¼Œä½ å’Œä½ çš„æœ‹å‹ä»¬æ‰“ç®—æŒ‰ä»¥ä¸‹æ–¹å¼åˆ†ç¡¬å¸ï¼š æ¯ä¸€è½®ä¸­ï¼Œä½ å°†ä¼šé€‰å‡º ä»»æ„ 3 å †ç¡¬å¸ï¼ˆä¸ä¸€å®šè¿ç»­ï¼‰ã€‚ Alice å°†ä¼šå–èµ°ç¡¬å¸æ•°é‡æœ€å¤šçš„é‚£ä¸€å †ã€‚ ä½ å°†ä¼šå–èµ°ç¡¬å¸æ•°é‡ç¬¬äºŒå¤šçš„é‚£ä¸€å †ã€‚ Bob å°†ä¼šå–èµ°æœ€åä¸€å †ã€‚ é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°æ²¡æœ‰æ›´å¤šç¡¬å¸ã€‚ ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ piles ï¼Œå…¶ä¸­ piles[i] æ˜¯ç¬¬ i å †ä¸­ç¡¬å¸çš„æ•°ç›®ã€‚ è¿”å›ä½ å¯ä»¥è·å¾—çš„æœ€å¤§ç¡¬å¸æ•°ç›®ã€‚ ç¤ºä¾‹ 1ï¼š è¾“å…¥ï¼špiles = [2,4,1,2,7,8] è¾“å‡ºï¼š9 è§£é‡Šï¼šé€‰å‡º (2, 7, 8) ï¼ŒAlice å–èµ° 8 æšç¡¬å¸çš„é‚£å †ï¼Œä½ å–èµ° 7 æšç¡¬å¸çš„é‚£å †ï¼ŒBob å–èµ°æœ€åä¸€å †ã€‚ é€‰å‡º (1, 2, 4) , Alice å–èµ° 4 æšç¡¬å¸çš„é‚£å †ï¼Œä½ å–èµ° 2 æšç¡¬å¸çš„é‚£å †ï¼ŒBob å–èµ°æœ€åä¸€å †ã€‚ ä½ å¯ä»¥è·å¾—çš„æœ€å¤§ç¡¬å¸æ•°ç›®ï¼š7 + 2 = 9. è€ƒè™‘å¦å¤–ä¸€ç§æƒ…å†µï¼Œå¦‚æœé€‰å‡ºçš„æ˜¯ (1, 2, 8) å’Œ (2, 4, 7) ï¼Œä½ å°±åªèƒ½å¾—åˆ° 2 + 4 = 6 æšç¡¬å¸ï¼Œè¿™ä¸æ˜¯æœ€ä¼˜è§£ã€‚ ç¤ºä¾‹ 2ï¼š è¾“å…¥ï¼špiles = [2,4,5] è¾“å‡ºï¼š4 ç¤ºä¾‹ 3ï¼š è¾“å…¥ï¼špiles = [9,8,7,6,5,1,2,3,4] è¾“å‡ºï¼š18 æç¤ºï¼š 3 \u003c= piles.length \u003c= 10^5 piles.length % 3 == 0 1 \u003c= piles[i] \u003c= 10^4 è§£é¢˜æ€è·¯ ç¬¬ä¸€ä¸ªæ€è·¯æ˜¯æŒ‰é¡ºåºå–ï¼Œç»´æŠ¤ä¸€ä¸ªå¤§é¡¶å †ï¼Œä¸€è½®å– 3 ä¸ªï¼Œè‡ªå·±æ¯æ¬¡å–ç¬¬äºŒä¸ªï¼Œå®ç°å®Œä»¥åï¼Œç¬¬ä¸‰ä¸ª case æ²¡è¿‡ï¼Œä»”ç»†çœ‹äº†ä¸€ä¸‹é¢˜ç›®ï¼Œæ¼æ‰äº†ç¬¬ä¸€ä¸ªå‘½é¢˜\næ¯ä¸€è½®ä¸­ï¼Œä½ å°†ä¼šé€‰å‡º ä»»æ„ 3 å †ç¡¬å¸ï¼ˆä¸ä¸€å®šè¿ç»­ï¼‰ã€‚\nç¬¬ä¸‰ä¸ª case çš„æœ€ä¼˜è§£æ˜¯ 18 , æŒ‰ç¬¬ä¸€ç§æ–¹å¼å–çš„è¯åªèƒ½å–åˆ° 15\nä»”ç»†æ€è€ƒä¸€ä¸‹ï¼Œç”±äº Alice çš„é€‰æ‹©ä¸€å®šæ˜¯è´ªçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¯æ¬¡åªèƒ½é€‰åˆ°ç¬¬äºŒå¤§å…ƒç´ ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç»™ Bob åˆ†é…æœ€å°å…ƒç´ ï¼Œè¿™æ ·æˆ‘ä»¬çš„è´ªå¿ƒç­–ç•¥æ‰æ˜¯æœ€ä¼˜è§£\nå®ç° æˆ‘ä»¬é¦–å…ˆå¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œç„¶åé€šè¿‡åŒæŒ‡é’ˆæ¥åˆ†é…å…ƒç´ ä¸­çš„æœ€å¤§æœ€å°å€¼\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 public int maxCoins(int[] piles) { Arrays.sort(piles); int sum = 0; int flag = 0; int l = 0 , r = piles.length - 1; while(l \u003c= r){ if(flag == 0){ r--; flag = 1; }else if(flag == 1){ sum += piles[r]; r--; flag = 2; }else if(flag == 2){ l++; flag = 0; } } return sum; } ","description":"","tags":["alg@geeedy"],"title":"æ¯æ—¥ä¸€é¢˜20250122","uri":"/posts/%E6%AF%8F%E6%97%A5%E4%B8%80%E9%A2%9820250122/"},{"categories":["Technolgic"],"content":"Summary ä¸»è¦é€šè¿‡ raft è®ºæ–‡çš„è§£è¯»ï¼Œç†è§£ raft ä¸€è‡´æ€§ç®—æ³•\nRaft æ˜¯ä¸€ç§ç”¨æ¥ç®¡ç†æ—¥å¿—å¤åˆ¶çš„ä¸€è‡´æ€§ç®—æ³•ï¼Œè„±èƒäº Paxos ä½†æ˜¯æ¯” Paxos æ›´å®¹æ˜“ç†è§£\nå°†ä¸€è‡´æ€§ç®—æ³•ç»†åˆ†ä¸ºäº† 3 ä¸ªå­é—®é¢˜ï¼Œå¹¶å¯¹æ¯ä¸ªå­é—®é¢˜è¿›è¡Œäº†è¯¦ç»†æä¾›æ˜ç¡®çš„è¯´æ˜\né€‰ä¸» æ—¥å¿—å¤åˆ¶ å®‰å…¨æ€§ è®ºæ–‡çš„å†…å®¹æ¦‚è¿° å¤åˆ¶çŠ¶æ€æœº Section2 é€šå¸¸çš„ RSM æ˜¯é€šè¿‡æ—¥å¿—å¤åˆ¶æ¥å®ç°çš„ï¼Œè€Œä¿è¯å¤åˆ¶æ—¥å¿—çš„ä¸€è‡´æ€§åˆ™ä¾èµ–ä¸€è‡´æ€§ç®—æ³•ï¼Œå¸¸è§çš„ä¸€è‡´æ€§ç®—æ³•ç³»ç»Ÿé€šå¸¸åŒ…æ‹¬ä»¥ä¸‹å‡ ç‚¹ç‰¹æ€§\nå®‰å…¨æ€§ï¼Œä¸€èˆ¬å†ä¸è€ƒè™‘æ‹œå åº­é—®é¢˜ä¸‹ï¼Œå‡ºç°çš„ ç½‘ç»œå»¶è¿Ÿã€åˆ†åŒºã€ä¸¢åŒ…é‡å¤é—®é¢˜ä¸ä¼šå¯¼è‡´ç³»ç»Ÿå‡ºç°å¼‚å¸¸ç»“æœ é«˜å¯ç”¨ï¼Œå¤šæ•°èŠ‚ç‚¹å­˜æ´»çŠ¶æ€ä¸‹ï¼Œç³»ç»Ÿå¯ç”¨ ä¸ä¾èµ–æ—¶é—´æ¥ä¿éšœä¸€è‡´æ€§ å¤šæ•°ä¸€è‡´æ€§ï¼Œå°‘æ•°å“åº”ç¼“æ…¢èŠ‚ç‚¹ä¸å½±å“æ•´ä½“æ€§èƒ½ Paxos çš„é—®é¢˜ Section3 è¿™éƒ¨åˆ†ä¸»è¦ä»‹ç»äº† Paxos åœ¨æ—¶é—´ä¸­çš„é—®é¢˜ Paxos ä¸»è¦æœ‰ä¸¤ä¸ªéšœç¢\néš¾ä»¥ç†è§£ å³ä½¿æ˜¯æœ€ç®€å•çš„ Paxos å•å†³è®®çš„å­é›†ï¼Œéƒ½æ˜¯éš¾ä»¥ç†è§£çš„ æ²¡æœ‰ä¸ºå®é™…å®ç°æä¾›ä¸€ä¸ªè‰¯å¥½çš„åŸºç¡€ å…¶æ¬¡æ˜¯å¤æ‚åº¦å¾ˆé«˜ï¼Œéš¾ä»¥ç”¨äºå®è·µ\nRaft çš„è®¾è®¡ç›®æ ‡ Section4 Raft çš„è®¾è®¡ç›®æ ‡\nä¸ºæ„å»ºå®é™…çš„å®ç°æä¾›è‰¯å¥½çš„åŸºç¡€ å¯ç†è§£ Raft ä¸ºæé«˜è¯¾ç†è§£æ€§åšå‡ºçš„ä¸¤ä¸ªæ–¹å¼\nç»†åˆ†é—®é¢˜ Leader Electionï¼ˆé€‰ä¸»ï¼‰ Log replication (æ—¥å¿—å¤åˆ¶) Safety (å®‰å…¨æ€§) Membership change (æˆå‘˜å˜æ›´) ç®€åŒ–çŠ¶æ€ç©ºé—´ Raft ä¸€è‡´æ€§ç®—æ³• Section5-8 è¯„ä¼°Raft ä¸ç›¸å…³å·¥ä½œ Section9-10 Section9 ä¸»è¦é€šè¿‡ä¸€äº›æ•°æ®è¯æ˜ raft çš„æ˜“äºç†è§£ã€æ­£ç¡®æ€§ä»¥åŠæ€§èƒ½çš„è¯´æ˜\nSection10 ä¸»è¦æ˜¯ç®€å•çš„ä»‹ç»äº†ä¸€å†™ä¸ raft ç›¸å…³æˆ–ç±»ä¼¼çš„é¡¹ç›® VR ï¼Œ zookeeper\nRaft ä¸€è‡´æ€§ç®—æ³• ATTACH Raft ç®—æ³•æ¦‚è¿° Raft ç®—æ³•çš„å…³é”®å±æ€§\nRaft ä¿éšœä¸‹åˆ—ç‰¹æ€§åœ¨ä»»ä½•æ—¶åˆ»éƒ½æ˜¯æœ‰æ•ˆçš„\nElection Safety: ä»»ä½•ä¸€ä¸ª term ä¸­ï¼Œæœ€å¤šåªæœ‰ä¸€ä¸ª Leader å¯ä»¥è¢«é€‰å‡º\nLeader Append-Only: Leader ä¸ä¼šè¦†å†™æˆ–åˆ é™¤ä»»ä½•æ—¥å¿— entry ï¼Œåªå…è®¸è¿½åŠ  entry\nLog Matching : å¦‚æœä¸¤ä¸ªæ—¥å¿— Entry æœ‰ç›¸åŒçš„ index å’Œ term ,é‚£ä¹ˆåœ¨æ­¤ä¹‹å‰çš„æ—¥å¿—æ˜¯ç»å¯¹ä¸€è‡´çš„\nLeader Completeness: å¦‚æœä¸€ä¸ªæ—¥å¿— entry åœ¨ä¸€ä¸ª term ä¸­è¢«æäº¤ï¼Œé‚£ä¹ˆè¿™æ¡æ—¥å¿— entry å¿…ç„¶å­˜åœ¨äºæ›´é«˜åºå·çš„ term çš„ Leader çš„æ—¥å¿—ä¸­\nState Machine Safety: å¦‚æœä¸€ä¸ªæœåŠ¡ç¡®è®¤äº†ç»™å®šæ‰€ä»¥çš„æ—¥å¿—ï¼Œå…¶ä»–æœåŠ¡ç»å¯¹ä¸ä¼šä½¿ç”¨ç›¸åŒçš„ç´¢å¼•\nRaft ä¸€è‡´æ€§ç®—æ³•ç»†åˆ†ä¸ºäº†ä¸€ä¸‹ 3 ä¸ªå­é—®é¢˜\nLeader election: å½“ç°æœ‰çš„ Leader å¤±è´¥æ—¶ï¼Œéœ€è¦é€‰ä¸¾å‡ºä¸€ä¸ªæ–° Leader Log replication: Leader å¿…é¡»æ¥å—æ¥è‡ªå®¢æˆ·ç«¯çš„æ—¥å¿—æ¡ç›®ï¼Œå¹¶å°†å…¶å¤åˆ¶åˆ°é›†ç¾¤ä¸­ï¼Œå¹¶ä¿è¯å…¶ä»–æ—¥å¿—ä¸è‡ªå·±çš„æ—¥å¿—ä¿æŒä¸€è‡´ã€‚ Safety: å¦‚æœä¸€ä¸ªæœåŠ¡ç¡®è®¤äº†ç»™å®šæ‰€ä»¥çš„æ—¥å¿—ï¼Œå…¶ä»–æœåŠ¡ç»å¯¹ä¸ä¼šä½¿ç”¨ç›¸åŒçš„ç´¢å¼• Raft basic ATTACH çŠ¶æ€ åœ¨ä»»æ„æ—¶åˆ»ï¼ŒServer åªæœ‰ leader , follover , candidate ä¸‰ç§çŠ¶æ€\nfollower: ä¸å¤„ç†è¯·æ±‚ï¼Œåªå“åº”æ¥è‡ª leader ä¸ candidate çš„è¯·æ±‚ leader: å¤„ç†æ‰€æœ‰æ¥è‡ª client çš„è¯·æ±‚ candidate: åœ¨ç«é€‰æ–° leader çš„æƒ…å†µå‡ºç° çŠ¶æ€å˜æ›´å›¾\nterm Raft å°†æ—¶é—´åˆ’åˆ†ä¸ºä»»æ„é•¿åº¦çš„ä»»æœŸã€‚\né€šè¿‡ terms ä½œä¸ºä¸€ä¸ªé€»è¾‘æ—¶é’Ÿï¼ŒæœåŠ¡é—´çš„æ¯æ¬¡äº¤äº’éƒ½ä¼šäº¤æ¢å„è‡ªçš„ term ï¼Œå½“ term æ¯”å¯¹æ–¹å¤§æ—¶ï¼Œä¼šæ›´æ–°è‡ªå·±çš„ term ä¸ºè¾ƒå¤§å€¼\nRPC RequestVoteRPCS\nAppendEntriesRPCs\nInstallSnapshotRPC\né€šè¿‡å¹¶è¡Œè¯·æ±‚æé«˜æ•ˆç‡\nRaft Leader Election Leader é€šè¿‡ä¿æŒå¿ƒè·³æ¥ä¸ Follwer åŒæ­¥çŠ¶æ€ï¼Œå½“å‡ºç° election timeout ï¼Œå³åœ¨ä¸€ä¸ªå‘¨æœŸæ—¶é—´å†…ï¼Œæ²¡æœ‰æ”¶åˆ°æ¥è‡ª Leader çš„å¿ƒè·³ï¼Œå³è®¤ä¸º Leader ä¸å¯è¾¾å¹¶å‘èµ·æ–°ä¸€è½®çš„é€‰ä¸¾\né€‰ä¸¾å¼€å§‹æ—¶ï¼Œfollower ä¼šå¢åŠ è‡ªå·±çš„ term å¹¶å°†è‡ªå·±è½¬ä¸º candidate,é€šè¿‡ RequestVote RPC è¿›è¡ŒæŠ•ç¥¨åï¼Œä¼šæœ‰ä¸‰ç§æƒ…å†µ\nèµ¢å¾—é€‰ä¸¾ å…¶ä»–æœåŠ¡èµ¢å¾—é€‰ä¸¾ é€‰ä¸¾è¶…æ—¶ï¼Œæ²¡æœ‰æœåŠ¡èµ¢å¾—é€‰ä¸¾ é€šè¿‡å¤šæ•°åŸåˆ™åŠå…ˆåˆ°å…ˆå¾—åŸåˆ™ä¿è¯æœ€å¤šåªæœ‰ä¸€ä¸ª candidate å¯ä»¥èµ¢å¾—é€‰ä¸¾ã€‚\ncanidate å¤„ç† RPC è¯·æ±‚çš„æƒ…å†µ\nown term \u003c rpc term æ—¶ï¼Œæ¢å¤åˆ° follower çŠ¶æ€\nown term \u003e rpc term æ—¶ï¼Œæ‹’ç»è¯·æ±‚\næ–°ä¸€è½®é€‰ä¸¾\nRaft é€šè¿‡éšæœºè¶…æ—¶é€‰ä¸¾æ—¶é—´æ¥è§£å†³å†²çªï¼Œä¸é‡‡ç”¨éšæœºåŒ–ä¼šå¯¼è‡´ç±»ä¼¼é¥¥é¥¿çš„é—®é¢˜\nRaft Log Replication leader é€‰ä¸¾ æ—¥å¿—å¤åˆ¶é‡‡ç”¨äº†ç±»ä¼¼ zk çš„å…¨å±€ä¸»å†™å…¥æ–¹æ¡ˆï¼Œèƒ½ä¿è¯å…¨å±€ä¸€è‡´æ€§\nä¸€æ—¦é€‰ä¸¾å‡ºé¢†å¯¼è€…ï¼Œé¢†å¯¼è€…å¼€å§‹å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå¹¶å°†å‘½ä»¤è¿½åŠ åˆ°æ—¥å¿—ä¸­ã€‚ é¢†å¯¼è€…é€šè¿‡ AppendEntries RPC å°†æ—¥å¿—æ¡ç›®å¤åˆ¶åˆ°è·Ÿéšè€…ã€‚ å½“æ—¥å¿—æ¡ç›®åœ¨å¤§å¤šæ•°æœåŠ¡å™¨ä¸Šå®‰å…¨å¤åˆ¶åï¼Œé¢†å¯¼è€…å°†è¯¥å‘½ä»¤åº”ç”¨åˆ°å…¶çŠ¶æ€æœºï¼Œå¹¶è¿”å›ç»“æœç»™å®¢æˆ·ç«¯ã€‚\næ—¥å¿—æäº¤ commited æœºåˆ¶ ï¼Œå½“ Leader æäº¤äº†ä¸€ä¸ªæ—¥å¿— Entry ï¼Œé‚£ä¹ˆ raft ä¼šä¿è¯è¯¥ Entry çš„æŒä¹…åŒ–ï¼Œå¹¶ä¸”æœ€ç»ˆä¼šåº”ç”¨äºæ‰€æœ‰å¯ç”¨çš„æœåŠ¡\næ—¥å¿—æ¡ç›®åœ¨ Leader å°†å…¶å¤åˆ¶åˆ°å¤§å¤šæ•°æœåŠ¡å™¨åè¢«æäº¤ã€‚ä¸€æ—¦æäº¤ï¼Œå®ƒå°†æ˜¯æŒä¹…çš„ï¼Œå¹¶æœ€ç»ˆè¢«æ‰€æœ‰çŠ¶æ€æœºåº”ç”¨ã€‚ é¢†å¯¼è€…è·Ÿè¸ªæœ€é«˜çš„æäº¤æ—¥å¿—ç´¢å¼•ï¼Œå¹¶åœ¨æœªæ¥çš„ RPC ä¸­åŒ…å«è¯¥ç´¢å¼•ï¼Œä»¥ç¡®ä¿è·Ÿéšè€…æ›´æ–°ã€‚\næ—¥å¿—åŒ¹é…å±æ€§ï¼š å¦‚æœä¸¤ä¸ªæ—¥å¿—æ¡ç›®å…·æœ‰ç›¸åŒçš„ç´¢å¼•å’Œä»»æœŸï¼Œå®ƒä»¬å­˜å‚¨ç›¸åŒçš„å‘½ä»¤ã€‚ å¦‚æœä¸¤ä¸ªæ—¥å¿—æ¡ç›®å…·æœ‰ç›¸åŒçš„ç´¢å¼•å’Œä»»æœŸï¼Œå®ƒä»¬åœ¨æ‰€æœ‰å‰é¢çš„æ¡ç›®ä¸Šæ˜¯ç›¸åŒçš„ï¼Œä»è€Œç¡®ä¿ä¸€è‡´æ€§ã€‚ AppendEntries è¿›è¡Œä¸€è‡´æ€§æ£€æŸ¥ï¼Œç¡®ä¿ç»´æŒè¿™ä¸€å±æ€§ã€‚\nå¤„ç†å´©æºƒä¸ä¸ä¸€è‡´ï¼š å¦‚æœè·Ÿéšè€…çš„æ—¥å¿—ä¸é¢†å¯¼è€…çš„æ—¥å¿—ä¸ä¸€è‡´ï¼Œé¢†å¯¼è€…ä¼šé€šè¿‡å¼ºåˆ¶è·Ÿéšè€…çš„æ—¥å¿—ä¸è‡ªå·±çš„æ—¥å¿—ä¸€è‡´æ¥è§£å†³ä¸ä¸€è‡´é—®é¢˜ã€‚é¢†å¯¼è€…ä¼šæ‰¾åˆ°ä¸¤è€…æ—¥å¿—åŒ¹é…çš„æœ€æ–°ä½ç½®ï¼Œåˆ é™¤è·Ÿéšè€…æ—¥å¿—ä¸­ä¸åŒ¹é…çš„æ¡ç›®ï¼Œå¹¶å‘é€è‡ªå·±çš„æ—¥å¿—æ¡ç›®è¦†ç›–å®ƒä»¬ã€‚\nLeader ç»´æŠ¤ä¸€ä¸ª nextIndexï¼ŒæŒ‡ç¤ºä¸‹ä¸€æ¡å°†å‘é€ç»™è·Ÿéšè€…çš„æ—¥å¿—ç´¢å¼•ã€‚å½“è·Ÿéšè€…çš„æ—¥å¿—ä¸ä¸€è‡´æ—¶ï¼Œ AppendEntries æ£€æŸ¥ä¼šå¤±è´¥ï¼Œé¢†å¯¼è€…ä¼šé€’å‡ nextIndex å¹¶é‡è¯•ï¼Œç›´åˆ°æ—¥å¿—ä¸€è‡´ã€‚\nRaft Safety Raft åè®®éœ€è¦ç¡®ä¿æ‰€æœ‰çš„é¢†å¯¼è€…éƒ½å·²æäº¤è¯¥æ¡ç›®ï¼Œè¿™æ ·æ‰èƒ½ç¡®ä¿æ—¥å¿—çš„ä¸€è‡´æ€§ã€‚å¦‚æœä¸€ä¸ªæ¡ç›®æ¥è‡ªä¹‹å‰çš„ä»»æœŸï¼Œå®ƒå¯èƒ½è¿˜æœªè¢«æ‰€æœ‰æœåŠ¡å™¨æ¥å—ï¼Œå› æ­¤ä¸èƒ½ç«‹å³è®¤ä¸ºå®ƒå·²æäº¤ã€‚è¿™ä¸ªé—®é¢˜æ˜¯ Raft åè®®ç¡®ä¿ä¸€è‡´æ€§å’Œå®‰å…¨æ€§çš„å…³é”®éƒ¨åˆ†ï¼Œå°¤å…¶åœ¨å¤„ç†é¢†å¯¼è€…å´©æºƒå’Œæ¢å¤æ—¶éœ€è¦ç‰¹åˆ«æ³¨æ„ã€‚\nRaft ä¸ä¼šé€šè¿‡è®¡æ•°å‰¯æœ¬çš„æ–¹å¼æäº¤æ¥è‡ªæ—§ä»»æœŸçš„æ—¥å¿—æ¡ç›®ã€‚åªæœ‰å½“å‰é¢†å¯¼è€…ä»»æœŸä¸­çš„æ—¥å¿—æ¡ç›®ï¼Œæ‰ä¼šé€šè¿‡å‰¯æœ¬è®¡æ•°çš„æ–¹å¼æäº¤ã€‚\nå…³äºå®‰å…¨æ€§çš„è¯æ˜ è¿™éƒ¨åˆ†æ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±çœ‹çœ‹åŸæ–‡\nRaft Follower ä¸ Candidate å´©æºƒ ä¸»è¦è¯´äº† Follower äº Candidate å´©æºƒæ—¶çš„ç­–ç•¥ï¼Œç›¸å¯¹ Leader å´©æºƒçš„ä¼šç®€å•ä¸å°‘\né‡è¯•ï¼Œç›´åˆ°æœåŠ¡æ¢å¤æ­£å¸¸ å½“ä¸šåŠ¡å®Œæˆå crash ï¼Œ é€šè¿‡ å¹‚ç­‰æ€§é‡è¯• è§£å†³ Raft Timing æ—¶é—´è®¡ç®—çš„ æ–¹å¼\nboardcastTime , avg of All(req,resp) , 0.5 ~ 20 ms electionTimout , 10 ~ 500ms MTBF , avg of failures Raft cluster membership chageu ATTACH é€šè¿‡ä¸€è‡´æ€§ç®—æ³•è‡ªåŠ¨å¤„ç†é…ç½®å˜æ›´ åœ¨å˜æ›´è¿‡ç¨‹ä¸­æ— æ³•ä¿éšœåŸå­è¡Œä¿®æ”¹ï¼Œåœ¨åˆ‡æ¢è¿‡ç¨‹ä¸­ï¼Œé›†ç¾¤ä¼šåˆ†è£‚æˆä¸¤ä¸ªç‹¬ç«‹çš„å¤§å¤šæ•°é›†ç¾¤ï¼ˆOldï¼ŒNewï¼‰\nRaft é‡‡ç”¨äº†ä¸€ç§ä¸¤é˜¶æ®µåè®®æ¥ä¿éšœå®‰å…¨æ€§\njoint consenus:\næ—¥å¿—åœ¨ \\( C_{\\text{old}} \\) ä¸ \\( C_{\\text{new}} \\) ä¸¤ä¸ªé…ç½®é›†ç¾¤é—´éƒ½è¿›è¡Œå¤åˆ¶ ä»»ä½•æ¥é…ç½®å†…çš„æœåŠ¡éƒ½å¯ä»¥ä½œä¸º Leader éœ€è¦åœ¨æ–°è€é…ç½®çš„æœåŠ¡ä¸­éƒ½èµ¢å¾—å¤§å¤šæ•°åŒæ„ ä¼šå¼•å…¥ 3 ä¸ªé—®é¢˜\næ–°æœºå™¨æ²¡æœ‰ä»»ä½•æ—¥å¿—ï¼Œä¼šå¯¼è‡´å¾ˆé•¿çš„ gap æ—¶é—´ æ–°åŠ å…¥çš„æœºå™¨æ²¡æœ‰é€‰ä¸¾æƒï¼Œç›´åˆ°æ—¥å¿—è¿½å¹³ Leader ä¸åœ¨æ–°é…ç½®ä¸­ åœ¨\\( C_{\\text{old}} \\)è¢«ç¡®è®¤é˜¶æ®µï¼Œä¼šè¢«è¿«è½¬ä¸º follower ï¼Œå¤åˆ¶æ—¥å¿—ï¼Œä½†ä¸ä¼šæŠŠè‡ªå·±è®¡å…¥å¤§å¤šæ•°ä¸­ï¼Œç­‰å¾…æ–°çš„ Leader è¢«ç§»é™¤çš„æœåŠ¡æœ‰å¯èƒ½åˆ†è£‚é›†ç¾¤ æœåŠ¡åœ¨æœ€å°é€‰ä¸¾è¶…æ—¶æ—¶é—´å†…ï¼Œæ²¡æœ‰æ”¶åˆ°å½“å‰ Leader çš„ç¡®è®¤ï¼Œä¸ä¼šè·Ÿæ–° term Raft Log Compaction ATTACH ä¿å­˜å½“å‰çš„çŠ¶æ€å€¼ï¼Œä»¥å½“å‰å€¼å¼€å§‹é‡æ–°è¿›è¡Œæ—¥å¿—çš„å†™è¿½åŠ \nå¿«ç…§åœ¨é›†ç¾¤é—´çš„å¤„ç†éš¾åº¦\nfollower è‡ªè¡Œå¤„ç† ç»Ÿä¸€ç”± Leader å¤„ç† Snapshot çš„åŒæ­¥åœºæ™¯å¯¼è‡´ç½‘ç»œä¸ç¨‹åºå»¶è¿Ÿ Leader çš„å¤æ‚æ€§ ä»¥åŠ 2 ä¸ªæ€§èƒ½ç›¸å…³çš„é—®é¢˜\nå¿«ç…§é¢‘ç‡ å†™å…¥å¿«ç…§çš„æ—¶é—´å ç”¨ï¼ŒCOW æ–¹æ¡ˆ Raft Client interaction å®¢æˆ·ç«¯åœ¨å¯åŠ¨æ—¶ï¼Œä¼šéšæœºé€‰æ‹©ä¸€ä¸ªæœåŠ¡ï¼Œå¦‚æœè¯¥æœåŠ¡ä¸æ˜¯ Leader ï¼Œä¼šæ‹’ç»è¯·æ±‚å¹¶è¿”å›å…¶æ‰€çŸ¥çš„æœ€æ–°çš„ Leader ä¿¡æ¯\nçº¿æ€§åŒ–è¯­æ„ çº¿æ€§åŒ–è¯­ä¹‰ï¼ˆlinearizable semanticsï¼‰æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä½¿ç”¨çš„ä¸€ç§ä¸€è‡´æ€§æ¨¡å‹ï¼Œç‰¹åˆ«æ˜¯åœ¨å¹¶å‘æ“ä½œçš„ä¸Šä¸‹æ–‡ä¸­ã€‚ç®€å•æ¥è¯´ï¼Œçº¿æ€§åŒ–ç¡®ä¿å¯¹å…±äº«èµ„æºï¼ˆå¦‚å˜é‡æˆ–æ•°æ®ç»“æ„ï¼‰çš„æ¯ä¸ªæ“ä½œçœ‹èµ·æ¥éƒ½åœ¨æŸä¸ªæ—¶é—´ç‚¹ç¬é—´æ‰§è¡Œï¼Œå¹¶ä¸”åœ¨å…¶è°ƒç”¨å’Œå“åº”ä¹‹é—´çš„æŸä¸ªæ—¶åˆ»æ‰§è¡Œã€‚çº¿æ€§åŒ–çš„å…³é”®ç‚¹å¦‚ä¸‹ï¼š\nç¬æ—¶æ“ä½œï¼šæ¯ä¸ªæ“ä½œå¿…é¡»çœ‹èµ·æ¥åœ¨å…¶è°ƒç”¨å’Œå“åº”ä¹‹é—´çš„æŸä¸ªæ—¶é—´ç‚¹ç¬é—´æ‰§è¡Œï¼Œè¿™ä¸ªâ€œæ—¶é—´ç‚¹â€è¢«è®¤ä¸ºæ˜¯æ“ä½œå®Œæˆçš„æ—¶åˆ»ã€‚\næ“ä½œé¡ºåºï¼šèµ„æºä¸Šçš„æ“ä½œå¿…é¡»éµå¾ªä¸€ä¸ªå…¨å±€é¡ºåºï¼Œè¯¥é¡ºåºä¸å®ƒä»¬çš„è°ƒç”¨é¡ºåºä¸€è‡´ã€‚å³ä½¿æ“ä½œæ˜¯å¹¶å‘æ‰§è¡Œçš„æˆ–åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¹±åºæ‰§è¡Œï¼Œå®ƒä»¬çš„ç»“æœä¹Ÿå¿…é¡»ä¸æŸç§é¡ºåºçš„æ‰§è¡Œä¸€è‡´ã€‚\nåŸå­æ€§ï¼šæ¯ä¸ªæ“ä½œçœ‹èµ·æ¥æ˜¯åŸå­çš„ï¼Œå³è¦ä¹ˆå®Œå…¨æ‰§è¡Œï¼Œè¦ä¹ˆå®Œå…¨ä¸æ‰§è¡Œï¼ˆæ²¡æœ‰éƒ¨åˆ†ç»“æœï¼‰ã€‚\nå®æ—¶ä¸€è‡´æ€§ï¼šå¦‚æœä¸€ä¸ªæ“ä½œçš„å“åº”åœ¨å¦ä¸€ä¸ªæ“ä½œçš„è°ƒç”¨ä¹‹å‰æ”¶åˆ°ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªæ“ä½œçš„ç»“æœå¿…é¡»å¯¹ç¬¬äºŒä¸ªæ“ä½œå¯è§ï¼Œå¹¶ä¸”ç¬¬äºŒä¸ªæ“ä½œå¼€å§‹æ—¶èƒ½çœ‹åˆ°ç¬¬ä¸€ä¸ªæ“ä½œçš„ç»“æœã€‚\né€šè¿‡é¡ºåºå·æ¥ä¿è¯\nRead-only å®ç°çš„ä¸¤ä¸ªå¿…è¦æªæ–½ Leader éœ€è¦çŸ¥é“æœ€æ–°çš„æäº¤ Entry no-op entry å¤„ç† Read-only è¯·æ±‚å‰ç¡®ä¿è‡ªå·±æ²¡æœ‰è¢«ç½¢å… é€šè¿‡å¿ƒè·³æœºåˆ¶æ¥ä¿éšœ ","description":"","tags":["distribute"],"title":"Raft ç®—æ³•","uri":"/posts/raft-%E7%AE%97%E6%B3%95/"},{"categories":["Algorithm"],"content":"Summary å›æº¯ç®—æ³•ä¸­çš„æ’åˆ—ä¸ç»„åˆ\næ¡†æ¶æ¨¡æ¿ å›æº¯ç®—æ³•åœ¨è§£å†³æ’åˆ—å’Œç»„åˆé—®é¢˜æ—¶ï¼Œä¸¤è€…çš„ä¸»è¦åŒºåˆ«åœ¨äºå…ƒç´ çš„é¡ºåºæ˜¯å¦é‡è¦ï¼Œä»¥åŠç»“æœä¸­æ˜¯å¦å…è®¸é‡å¤é€‰å–ç›¸åŒå…ƒç´ ã€‚\næ’åˆ— (Permutation) é¡ºåºé‡è¦ï¼šåœ¨æ’åˆ—ä¸­ï¼Œå…ƒç´ çš„é¡ºåºä¼šå½±å“ç»“æœã€‚ä¾‹å¦‚ï¼Œ[1, 2] å’Œ [2, 1] è¢«è§†ä¸ºä¸åŒçš„æ’åˆ—ã€‚ å…¸å‹é—®é¢˜ï¼šæ±‚æ•°ç»„çš„å…¨æ’åˆ—ã€ç»™å®šæ•°åˆ—çš„ä¸åŒæ’åˆ—æ–¹å¼ç­‰ã€‚ ç‰¹ç‚¹ï¼šéœ€è¦è€ƒè™‘æ¯ä¸ªå…ƒç´ åœ¨æ¯ä¸ªä½ç½®çš„å¯èƒ½æ€§ï¼Œé€šå¸¸é€šè¿‡æ ‡è®°æ¥é¿å…é‡å¤é€‰å–å·²ä½¿ç”¨çš„å…ƒç´ ã€‚ ç»„åˆ (Combination) é¡ºåºä¸é‡è¦ï¼šåœ¨ç»„åˆä¸­ï¼Œå…ƒç´ çš„é¡ºåºä¸å½±å“ç»“æœã€‚ä¾‹å¦‚ï¼Œ[1, 2] å’Œ [2, 1] è¢«è§†ä¸ºç›¸åŒçš„ç»„åˆã€‚ å…¸å‹é—®é¢˜ï¼šæ±‚æ•°ç»„çš„æ‰€æœ‰å­é›†ã€é€‰å‡ºè‹¥å¹²ä¸ªå…ƒç´ çš„ç»„åˆç­‰ã€‚ ç‰¹ç‚¹ï¼šåªéœ€è¦å…³å¿ƒæŸä¸ªå…ƒç´ æ˜¯å¦è¢«é€‰ä¸­ï¼Œä¸éœ€è¦è€ƒè™‘é¡ºåºï¼Œé€šå¸¸å¯ä»¥é€šè¿‡é™åˆ¶é€’å½’çš„èµ·å§‹ä½ç½®æ¥é¿å…é‡å¤ç»„åˆã€‚ æ’åˆ—ä»£ç æ¨¡æ¿\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 void backtrack(List\u003cList\u003cInteger\u003e\u003e res, List\u003cInteger\u003e tempList, int[] nums, boolean[] used) { if (tempList.size() == nums.length) { res.add(new ArrayList\u003c\u003e(tempList)); } else { for (int i = 0; i \u003c nums.length; i++) { if (used[i]) continue; // è·³è¿‡å·²ä½¿ç”¨çš„å…ƒç´  used[i] = true; tempList.add(nums[i]); backtrack(res, tempList, nums, used); used[i] = false; tempList.remove(tempList.size() - 1); } } } ç»„åˆæ¡†æ¶æ¨¡æ¿\n1 2 3 4 5 6 7 8 void backtrack(List\u003cList\u003cInteger\u003e\u003e res, List\u003cInteger\u003e tempList, int[] nums, int start) { res.add(new ArrayList\u003c\u003e(tempList)); for (int i = start; i \u003c nums.length; i++) { tempList.add(nums[i]); backtrack(res, tempList, nums, i + 1); // ä»ä¸‹ä¸€ä¸ªå…ƒç´ å¼€å§‹ tempList.remove(tempList.size() - 1); } } æ’åˆ—ä¸­å…ƒç´ çš„é¡ºåºé‡è¦ï¼Œé€šå¸¸ä½¿ç”¨ä¸€ä¸ª boolean[] used æ•°ç»„æ¥è·Ÿè¸ªå·²é€‰æ‹©çš„å…ƒç´ ã€‚ ç»„åˆä¸­å…ƒç´ çš„é¡ºåºä¸é‡è¦ï¼Œä½¿ç”¨ start å‚æ•°æ§åˆ¶é€’å½’çš„èµ·å§‹ä½ç½®ï¼Œä»¥é¿å…é‡å¤çš„ç»„åˆã€‚ è§£é¢˜ 46. å…¨æ’åˆ— - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 class Solution { private List\u003cList\u003cInteger\u003e\u003e res; private List\u003cInteger\u003e tmp; public List\u003cList\u003cInteger\u003e\u003e permute(int[] nums) { res = new ArrayList\u003c\u003e(); tmp = new ArrayList\u003c\u003e(); int n = nums.length; boolean[] used = new boolean[n]; backtrack(n,nums,used); return res; } private void backtrack(int n ,int[] nums,boolean[] used){ if(tmp.size() == n){ res.add(new ArrayList\u003c\u003e(tmp)); } for(int i = 0 ; i \u003c nums.length; i++){ if(!used[i]){ used[i] = true; tmp.add(nums[i]); backtrack(n,nums,used); used[i] = false; tmp.remove(tmp.size()-1); } } } } 77. ç»„åˆ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 class Solution { private List\u003cList\u003cInteger\u003e\u003e res; private List\u003cInteger\u003e tmp; public List\u003cList\u003cInteger\u003e\u003e combine(int n, int k) { res = new ArrayList\u003c\u003e(); tmp = new ArrayList\u003c\u003e(); backtrack(n,k,1); return res; } private void backtrack(int n , int k ,int start){ //å‰ªææ“ä½œ if(tmp.size() + (n-start+1) \u003c k){ return; } if(tmp.size() == k){ res.add(new ArrayList\u003c\u003e(tmp)); } for(int i = start ; i \u003c= n ; i++){ tmp.add(i); backtrack(n,k,i+1); tmp.remove(tmp.size() - 1); } } } 216. ç»„åˆæ€»å’Œ III - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 class Solution { private List\u003cInteger\u003e path; private List\u003cList\u003cInteger\u003e\u003e res; public List\u003cList\u003cInteger\u003e\u003e combinationSum3(int k, int n) { path = new ArrayList\u003c\u003e(); res = new ArrayList\u003c\u003e(); backtrack(k,n,1,0); return res; } private void backtrack( int k , int n,int cur, int sum ){ if (sum \u003e n) { // å‰ªææ“ä½œ return; } if(path.size() == k \u0026\u0026 sum == n){ res.add(new ArrayList\u003c\u003e(path)); } for(int i = cur ; i \u003c= 9 - (k-path.size()) + 1; i++){ path.add(i); backtrack(k,n,i+1,sum + i); path.remove(path.size()-1); } } } ","description":"","tags":null,"title":"ç®—æ³•æ—¥è®°-03","uri":"/posts/%E7%AE%97%E6%B3%95%E6%97%A5%E8%AE%B0-03/"},{"categories":["Algorithm"],"content":"Summary æ»‘åŠ¨çª—å£çš„ä¸€ç§ç®—æ³•æ¨¡æ¿\næ¨¡æ¿ æ»‘åŠ¨çª—å£çš„ä¸€ç§ç®—æ³•æ¨¡æ¿\n1 2 3 4 5 6 7 8 9 //å¤–å±‚å¾ªç¯æ‰©å±•å³è¾¹ç•Œï¼Œå†…å±‚å¾ªç¯æ‰©å±•å·¦è¾¹ç•Œ for (int l = 0, r = 0 ; r \u003c n ; r++) { //å½“å‰è€ƒè™‘çš„å…ƒç´  while (l \u003c= r \u0026\u0026 check()) {//åŒºé—´[left,right]ä¸ç¬¦åˆé¢˜æ„ //æ‰©å±•å·¦è¾¹ç•Œ } //åŒºé—´[left,right]ç¬¦åˆé¢˜æ„ï¼Œç»Ÿè®¡ç›¸å…³ä¿¡æ¯ } 3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸² 3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸² - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ æœ€é•¿ å­ä¸² çš„é•¿åº¦ã€‚\næœ¬é¢˜å¥—ç”¨æ¨¡æ¿\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 public int lengthOfLongestSubstring(String s) { char[] cs = s.toCharArray(); int max = 0; Set\u003cCharacter\u003e set = new HashSet\u003c\u003e(); for(int l = 0 , r = 0 ; r \u003c cs.length ; r++){ char c = cs[r]; while(set.contains(c)){ set.remove(cs[l]); l++; } set.add(c); max = Math.max(max,r-l+1); } return max; } é•¿åº¦æœ€å°çš„å­æ•°ç»„ 209. é•¿åº¦æœ€å°çš„å­æ•°ç»„ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 public int minSubArrayLen(int target, int[] nums) { int sum = 0; int minLength = Integer.MAX_VALUE; for (int l = 0, r = 0; r \u003c nums.length; r++) { sum += nums[r]; while (l \u003c r \u0026\u0026 sum \u003e= target) { sum -= nums[l]; l++; minLength = Math.min(minLength, r - l); } } return minLength == Integer.MAX_VALUE ? 0 : minLength; } ","description":"","tags":null,"title":"åˆ·é¢˜æ—¥è®°-02","uri":"/posts/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0-02/"},{"categories":["Algorithm"],"content":"206.åè½¬é“¾è¡¨ 206. åè½¬é“¾è¡¨ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™ä½ å•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ head ï¼Œè¯·ä½ åè½¬é“¾è¡¨ï¼Œå¹¶è¿”å›åè½¬åçš„é“¾è¡¨ã€‚\nä¸¤ç§è§£æ³•\né€’å½’ é€’å½’çš„å‡½æ•°å¯ä»¥çœ‹æˆä¸€ä¸ªå·²ç»å®ç°äº†çš„å‡½æ•° reverse ï¼Œæˆ‘ä»¬é€šè¿‡ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œä¸€ä¸ªæ˜¯ pre ä¸€ä¸ª cur ï¼Œåè½¬é“¾è¡¨å…¶å®æ˜¯äº¤æ¢äº†ä¸¤ä¸ªèŠ‚ç‚¹è¿æ¥çš„æŒ‡å‘ï¼Œæˆ‘ä»¬åœ¨é€’å½’å‡½æ•°ä¸­ï¼Œåªç¿»è½¬å•ç›¸çš„è¿æ¥å°±è¡Œï¼Œå°±æ˜¯å…ˆ åè½¬cur è·Ÿ pre ï¼Œç„¶åæŠŠåè½¬åçš„ cur è·Ÿ next åœ¨è¿›è¡Œåè½¬ï¼Œè¿™æ˜¯ååºçš„æ“ä½œé€»è¾‘\n1 2 3 4 5 6 7 8 9 10 11 12 public ListNode reverseList(ListNode head) { return reverse(null,head); } private ListNode reverse(ListNode pre , ListNode cur){ if(cur == null){ return pre; } ListNode next = cur.next; cur.next = pre; return reverse(cur, next); } è¿­ä»£ è¿­ä»£éœ€è¦ç»´æŠ¤ä¸¤ä¸ªæŒ‡é’ˆï¼Œè¿­ä»£è¿‡ç¨‹ä¸­ï¼Œæ³¨æ„æ“ä½œé¡ºåºå°±è¡Œ,å…ˆè€ƒè™‘æœ€ç®€å•çš„æƒ…å†µï¼Œnull -\u003e 1 -\u003e 2 , åˆ†åˆ«å¯¹åº”ä¸‰ä¸ªæŒ‡é’ˆ pre , cur , next , æˆ‘ä»¬æŠŠ cur.next å…ˆæŒ‡å‘ pre , ç„¶åè¿­ä»£ pre è·Ÿ cur\n1 2 3 4 5 6 7 8 9 10 11 public ListNode reverseList(ListNode head) { ListNode pre = null; ListNode cur = head; while(cur != null){ ListNode next = cur.next; cur.next = pre; pre = cur; cur = next; } return pre; } 215. æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´  215. æ•°ç»„ä¸­çš„ç¬¬Kä¸ªæœ€å¤§å…ƒç´  - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\nç»™å®šæ•´æ•°æ•°ç»„ nums å’Œæ•´æ•° kï¼Œè¯·è¿”å›æ•°ç»„ä¸­ç¬¬ k ä¸ªæœ€å¤§çš„å…ƒç´ ã€‚\nè¯·æ³¨æ„ï¼Œä½ éœ€è¦æ‰¾çš„æ˜¯æ•°ç»„æ’åºåçš„ç¬¬ k ä¸ªæœ€å¤§çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ k ä¸ªä¸åŒçš„å…ƒç´ ã€‚\nä½ å¿…é¡»è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º O(n) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚\nç”±äºå †çš„å»ºå †ä¸åˆ é™¤çš„å¹³å‡æ—¶é—´æ˜¯ O(logn) ä¸èƒ½æ»¡è¶³ O(n) çš„æ—¶é—´å¤æ‚åº¦\n1 2 3 4 5 6 7 8 9 10 11 public int findKthLargest(int[] nums, int k) { PriorityQueue\u003cInteger\u003e queue = new PriorityQueue\u003c\u003e(k,(x,y) -\u003e y-x); for(int i = 0 ; i \u003c nums.length ; i++){ queue.offer(nums[i]); } int res = 0; while(k-- \u003e0){ res = queue.poll(); } return res; } åŸºäºå¿«æ’çš„è§£å†³æ–¹æ¡ˆ\nquick çš„åŸºæœ¬æ€è·¯ï¼Œæˆ‘ä»¬éšæœºé€‰æ‹©ä¸€ä¸ªåˆ‡åˆ†ç‚¹ï¼Œå°†åˆ‡åˆ†ç‚¹æ’å®šï¼Œä¿è¯åˆ‡åˆ†å…ƒç´ çš„ å·¦è¾¹å…ƒç´ éƒ½å°äºåˆ‡åˆ†ç‚¹ï¼Œå³è¾¹å…ƒç´ å¤§äºåˆ‡åˆ†ç‚¹,é€’å½’çš„æ’å®šæ¯ä¸ªå­åˆ†åŒºï¼Œæœ€åæ•´ä¸ªæ•°ç»„æ’å®š\n1 2 3 4 5 6 7 8 private void quickSort(int[] nums, int lo, int hi) { if (lo \u003e= hi) { return; } int p = partition(nums, lo, hi); quickSort(nums, lo, p-1); quickSort(nums, p + 1, hi); } å…³é”®åœ¨äº åˆ‡åˆ†å…ƒç´ çš„é€‰æ‹©\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 private int partition(int[] nums, int lo, int hi) { int i = lo, j = hi + 1; int v = nums[i]; // åˆ‡åˆ†å…ƒç´ é€‰æ‹© while (true) { while (nums[i++] \u003c v) { if (i == hi) { break; } } while (nums[j--] \u003e v) { if (j == lo) { break; } } //å½“ i \u003e= j çš„æ—¶å€™ï¼Œé€€å‡ºå¾ªç¯ if (i \u003e= j) { break; } swap(nums, i, j); } swap(nums, lo, j); return j; } å›åˆ°é¢˜ç›®ä¸­ï¼Œæˆ‘ä»¬å¯¹å¿«æ’åšä¸ªæ”¹é€ ï¼Œ\næˆ‘ä»¬éœ€è¦å¯¹åˆ‡åˆ†é€»è¾‘åšä¸€ä¸‹ä¿®æ”¹ï¼Œä¿è¯å€’åºå®ç° å½“æˆ‘ä»¬åˆ‡åˆ†ç‚¹ p ç­‰äº k çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„é¢˜ç›®å°±æ’å®šäº†ç›´æ¥è¿”å›ï¼Œå¦‚æœ p \u003c k åˆ™ä¸‹ä¸€æ­¥æ’å®šå³ä¾§ï¼Œå¦‚æœ p \u003e k åˆ™æ’å®šå·¦ä¾§ æœ€åä»£ç å®ç°\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 public int findKthLargest(int[] nums, int k) { return quickSort(nums, 0, nums.length - 1, k - 1); } private int quickSort(int[] nums, int lo, int hi, int k) { if (lo \u003e= hi) { return nums[k]; } int p = partition(nums, lo, hi); if (p == k) { return nums[p]; } else if (p \u003c k) { return quickSort(nums, p + 1, hi, k); } else { return quickSort(nums, lo, p - 1, k); } } private int partition(int[] nums, int lo, int hi) { int i = lo, j = hi + 1; int v = nums[i]; // åˆ‡åˆ†å…ƒç´ é€‰æ‹© while (true) { while (nums[++i] \u003e v) { if (i == hi) { break; } } while (nums[--j] \u003c v) { if (j == lo) { break; } } if (i \u003e= j) { break; } swap(nums, i, j); } swap(nums, lo, j); return j; } private void swap(int[] nums, int x, int y) { int tmp = nums[x]; nums[x] = nums[y]; nums[y] = tmp; } ","description":"","tags":null,"title":"åˆ·é¢˜æ—¥è®°-01","uri":"/posts/%E5%88%B7%E9%A2%98%E6%97%A5%E8%AE%B0-01/"},{"categories":["Algorithm"],"content":"Summary BST äºŒå‰æœç´¢æ ‘ï¼Œæ˜¯ä¸€é¢—äºŒå‰æ ‘ï¼Œå…¶ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ï¼Œéƒ½å¤§äº å·¦å­æ ‘çš„ä»»æ„èŠ‚ç‚¹ è€Œå°äº å³å­æ ‘çš„ä»»æ„èŠ‚ç‚¹\nåŸºæœ¬ç»“æ„ BST æ˜¯ä¸€ä¸ªæ•°æ®å½¢æ€ç›¸å¯¹ç‰¹æ®Šçš„äºŒå‰æ ‘ï¼ŒäºŒå‰æ ‘æœ¬è´¨æ˜¯ä¸€ç§ç‰¹åŒ–çš„é“¾è¡¨ç»“æ„ï¼ŒåŒæ—¶æŒæœ‰å·¦å³ä¸¤ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œæ˜¯ä¸€ç§å¤©ç„¶çš„é€’å½’ç»“æ„ï¼Œ\n1 2 3 4 5 class Node { int val; Node left; Node right; } æ‰©å±•ç»“æ„ï¼Œæˆ‘ä»¬é’ˆå¯¹ Node çš„åŸºæœ¬ç»“æ„ï¼Œè¿›è¡Œä¸€ä¸‹æ‰©å±•ï¼Œæ”¯æŒ Key Value æ ¼å¼çš„æ•°æ®ï¼Œæ›´ç±»ä¼¼æˆ‘ä»¬çš„ Map ç»“æ„ï¼ŒåŒæ—¶åŠ å…¥ä¸€ä¸ª size å±æ€§ï¼Œè¡¨ç¤ºå½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ•°é‡\næˆ‘ä»¬åˆ©ç”¨æ³›å‹çš„ä¸Šç•Œæ¥å¼ºåˆ¶ K å¿…é¡»æ˜¯ Comparable çš„å­—ç±»\n1 2 3 4 5 6 7 class Node\u003cK extend Comparable\u003cK\u003e , V\u003e { K key; V value; Node\u003cK extend Comparable, V\u003e left; Node\u003cK extend Comparable,V\u003e right; int size; } ç®—æ³•æŠ½è±¡ æˆ‘ä»¬å…ˆæœ€åŸºæœ¬çš„éœ€è¦æä¾› 3 ä¸ªæŠ½è±¡æ“ä½œï¼Œ find() , insert() , remove()\nå¹¶ä¸”æ ‘å†…ä¸å…è®¸å­˜åœ¨é‡å¤ Key , ç›¸åŒ Key çš„ insert æ“ä½œï¼Œä¼šè¦†ç›–ä¹‹å‰çš„ value\n1 2 3 4 5 interface Bst\u003cK extend Comparable\u003cK\u003e,V\u003e { Value find(Key k); void insert(Key k,V v); void remove(Key k); } ä»¥ä¸Šæˆ‘ä»¬çš„å‡†å¤‡å·¥ä½œåŸºæœ¬å®Œæˆäº†ï¼Œåé¢çš„æ“ä½œéœ€è¦çš„æ—¶å€™æˆ‘ä»¬åœ¨å›æ¥å¤„ç†ï¼ŒåŸºæœ¬æ¨¡æ¿å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 interface Bst\u003cK extends Comparable\u003cK\u003e, V\u003e { V find(K k); void insert(K k, V v); void remove(K k); } public class BstTree\u003cK extends Comparable\u003cK\u003e, V\u003e implements Bst\u003cK, V\u003e { private Node root; private class Node { K k; V v; Node left; Node right; int size; } } ç®—æ³•å®ç° find(K k) ç¬¬ä¸€æ­¥å…ˆå®ç°æœç´¢ç®—æ³• find(K k) , å¦‚æœæˆ‘ä»¬æ‰¾åˆ° k ï¼Œåˆ™è¿”å›å¯¹åº”çš„ value ï¼Œå¦åˆ™æˆ‘ä»¬è¿”å› null , BST çš„æœç´¢æ˜¯æœ€ç®€å•çš„ï¼Œæˆ‘ä»¬ä»æ ¹èŠ‚ç‚¹å¼€å§‹æœç´¢åˆ©ç”¨ k ä¸ Node èŠ‚ç‚¹çš„ kn è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœ k \u003c kn , åˆ™å‘å·¦å­æ ‘æœç´¢ï¼Œå¦‚æœ k \u003e kn åˆ™å‘å³å­æ ‘æœç´¢ï¼Œå¦‚æœ k = kn ï¼Œåˆ™è¿”å›èŠ‚ç‚¹ value\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 @Override public V find(K k) { final Node node = find(root, k); if (node != null) { return node.v; } else { return null; } } private Node find(Node n, K k) { if (n == null) { return null; } int cmp = k.compareTo(n.k); if (cmp \u003c 0) { return find(n.left, k); } else if (cmp \u003e 0) { return find(n.right, k); } else { return n; } } insert(K k,V v) æ’å…¥ä¹Ÿæ˜¯æ¯”è¾ƒç®€å•çš„é€»è¾‘ï¼Œæˆ‘ä»¬ä» root èŠ‚ç‚¹å¼€å§‹ï¼Œåˆ©ç”¨ä¸ find ç±»ä¼¼çš„é€»è¾‘æ‰¾åˆ°å¯ä»¥æ’å…¥èŠ‚ç‚¹çš„ä½ç½®ï¼Œæ„é€ ä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œç„¶åè¿›è¡Œæ’å…¥ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 @Override public void insert(K k, V v) { insert(root, k, v); } private Node insert(Node node, K k, V v) { if (node == null) { return new Node(k, v); } int cmp = k.compareTo(node.k); if (cmp \u003c 0) { node.left = insert(node.left, k, v); } else if (cmp \u003e 0) { node.right = insert(node.right, k, v); } else { node.v = v; } //æ’å…¥çš„æ—¶å€™ï¼Œéœ€è¦æ›´æ–°ä¸€ä¸‹ size node.size = size(node.left) + size(node.right) + 1; return node; } remove å®ç° remove æ˜¯ BST å®ç°ä¸­æœ€å¤æ‚çš„æ“ä½œï¼Œå¦‚æœè¦åˆ é™¤çš„èŠ‚ç‚¹ï¼ŒåŒæ—¶æ‹¥æœ‰å·¦å³å­èŠ‚ç‚¹çš„æƒ…å†µï¼Œå…‰æƒ³æƒ³å°±ä¼šå¾ˆå¤æ‚\næˆ‘ä»¬å…ˆæ¥æ€è€ƒä¸€ä¸ªç®€å•çš„ç‰¹æ®Šæ“ä½œï¼Œæ‰¾åˆ°æ ‘ä¸­çš„æœ€å¤§/æœ€å°å€¼ï¼Œåˆ é™¤æ ‘ä¸­çš„æœ€å¤§æœ€å°å€¼\næˆ‘ä»¬ä»£ç ä¸­åªå®ç°åˆ é™¤æœ€å°å€¼çš„æ–¹å¼ï¼Œå¦‚ä¸Šå›¾ï¼Œæˆ‘ä»¬ä» root å‡ºå‘ï¼Œåœ¨å·¦å­æ ‘ä¸Šéå†ï¼Œåœ¨é€’å½’çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ›´æ–°å·¦å­æ ‘çš„æŒ‡é’ˆä¸ºåˆ é™¤åè¿”å›çš„èŠ‚ç‚¹\nå·¦å­æ ‘ä¸ä¸ºç©ºï¼Œåˆ™ä¸æ˜¯æœ€å°å€¼ï¼Œåˆ™ç»§ç»­éå†å·¦å­æ ‘ å·¦å­æ ‘ä¸ºç©ºï¼Œåˆ™è¿”å›å³å­æ ‘ï¼›å³å­æ ‘ä¸ä¸ºç©ºï¼Œåˆ™çˆ¶èŠ‚ç‚¹çš„å·¦æŒ‡é’ˆæŒ‡å‘äº†åˆ é™¤èŠ‚ç‚¹çš„å³å­æ ‘ï¼›å³å­æ ‘ä¸ºç©ºï¼Œåˆ™çˆ¶èŠ‚ç‚¹çš„å·¦æŒ‡é’ˆæŒ‡å‘äº†null 1 2 3 4 5 6 7 8 9 10 11 12 public void delMin() { delMin(root); } private Node delMin(Node node) { if (node.left == null) { return node.right; } node.left = delMin(node.left); node.size = size(node.left) + size(node.right) + 1; return node; } ç°åœ¨ä»ç‰¹æ®Šåˆ°ä¸€èˆ¬æƒ…å†µï¼Œè€ƒè™‘åˆ é™¤ä»»æ„èŠ‚ç‚¹\nä»é€»è¾‘ä¸Šè®²ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦é€’å½’çš„æ‰¾åˆ°éœ€è¦åˆ é™¤çš„ç›®æ ‡ key\nå…ˆæ€è€ƒä¸€ä¸‹ BST çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå°±æ˜¯ä¸­åºéå†æ˜¯æœ‰åºçš„ï¼Œå¦‚ä¸‹å›¾ï¼Œä¸­åºéå†çš„å°±æ˜¯ [3,4,5,21,20,22,16,27,28,32] ,å‡å¦‚æˆ‘ä»¬åˆ é™¤ 5 ï¼Œé‚£ä¹ˆ 5 åœ¨æ ‘ä¸­çš„ä½ç½®ï¼Œéœ€è¦ä¸€ä¸ªå…ƒç´ å¡«å……è¿‡æ¥ï¼Œç»§ç»­ä¿è¯äºŒå‰æ ‘çš„æœ‰åºæ€§ï¼Œå¾ˆæ˜¾ç„¶ï¼Œè¿™ä¸ªèŠ‚ç‚¹æ”¾ 4,19 æ˜¯å¯ä»¥ç»§ç»­ä¿è¯èŠ‚ç‚¹çš„æœ‰åºæ€§çš„ï¼Œè¿™ä¿©èŠ‚ç‚¹åˆ†åˆ«æ˜¯è¢«åˆ é™¤èŠ‚ç‚¹çš„å‰é©±èŠ‚ç‚¹ä¸åç»§èŠ‚ç‚¹\nç°åœ¨æˆ‘ä»¬è€ƒè™‘ä¸€ä¸‹å¦‚ä½•åˆ é™¤\næˆ‘ä»¬å…ˆé€’å½’çš„ä» root å¼€å§‹ï¼Œæ‰¾åˆ°åˆ é™¤çš„ç›®æ ‡èŠ‚ç‚¹ x æˆ‘ä»¬ç”¨ä¸€ä¸ªä¸´æ—¶å˜é‡ tmp æ¥æŒ‡å‘ x å°† x.right æŒ‡å‘ delMin çš„è¿”å›å€¼ï¼Œå³ åˆ é™¤åæ‰€æœ‰èŠ‚ç‚¹å¤§äºåˆ é™¤èŠ‚ç‚¹çš„å­äºŒå‰æ ‘ å°† x.left æŒ‡å‘ tmp.left ï¼Œå³ åˆ é™¤åæ‰€æœ‰èŠ‚ç‚¹å°äºåˆ é™¤èŠ‚ç‚¹çš„å­äºŒå‰æ ‘ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 @Override public void remove(K k) { remove(root, k); } private Node remove(Node x, K k) { final int cmp = x.k.compareTo(k); if (cmp \u003c 0) { //IMPORTANT è¿™é‡Œæ˜¯é€’å½’çš„è®¾ç½® x èŠ‚ç‚¹çš„ left æŒ‡é’ˆï¼Œä¸èƒ½ç›´æ¥ return x.left = remove(x.left, k); } else if (cmp \u003e 0) { x.right = remove(x.right, k); } else { //æ‰¾åˆ°äº† è¦åˆ é™¤çš„èŠ‚ç‚¹ if (x.left == null) { //å·¦å­æ ‘ä¸ºç©ºï¼Œç›´æ¥è¿”å›å³å­æ ‘ å›¾ä¸­ åˆ é™¤ 3 çš„ case return x.right; } if (x.right == null) { //å³å­æ ‘ä¸ºç©ºï¼Œç›´æ¥è¿”å›å·¦å­æ ‘ å›¾ä¸­åˆ é™¤ 22 çš„ case return x.left; } //å·¦å³éƒ½ä¸ä¸ºç©º Node tmp = x; x = findMin(x.right); x.right = delMin(x.right); x.left = tmp.left; } x.size = size(x.left) + size(x.right) + 1; return x; } æ€»ç»“ ä»¥ä¸ŠåŸºæœ¬å®Œæˆäº†ä¸€ä¸ª BST çš„åŸºæœ¬å®ç°ï¼ŒBST è¢«è¯Ÿç—…çš„é—®é¢˜æ˜¯å¹³è¡¡æ€§çš„é—®é¢˜ï¼Œæç«¯æƒ…å†µä¸‹ï¼Œä¼šé€€åŒ–ä¸ºé“¾è¡¨ï¼Œç”Ÿæˆä¸Šå¾ˆå°‘æœ‰å®é™…ä½¿ç”¨ï¼Œä½†æ˜¯ä½œä¸ºä¸€ç§åŸºç¡€æ•°æ®ç»“æ„ï¼Œæ˜¯ç®€å•ä¸”åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹è¶³å¤Ÿé«˜æ•ˆçš„ï¼Œæ•ˆç‡ä¸Šå¯èƒ½æ¯”ä¸è¿‡çº¢é»‘æ ‘ï¼Œä½†æ˜¯å®ç°å¤æ‚åº¦ä¸Šï¼ŒBST è¦ç®€å•å¾ˆå¤šå½“ç„¶ä½¿ç”¨ Java çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åŸºæœ¬ä¸å¤ªå¯èƒ½è‡ªå·±æ„å»ºä¸€ä¸ª BST ï¼Œå†…ç½®çš„ HashMap,TreeMap å·²ç»å®ç°äº†å¾ˆé«˜æ•ˆçš„æŸ¥æ‰¾è¡¨ï¼Œä¸è¿‡è¿˜æ˜¯éœ€è¦ç†è§£ç®—æ³•çš„åŸºæœ¬é€»è¾‘ä¸åšæ³•ï¼›\nä¸€ä¸ªå°ğŸ’¡\nBST çš„é—®é¢˜æ˜¯ä¸å¹³è¡¡å¯¼è‡´çš„æ•ˆç‡é€€åŒ–ï¼Œé‚£ä¹ˆæˆ‘æ˜¯ä¸æ˜¯å¯ä»¥æ¥å®šæœŸçš„å¯¹ BST è¿›è¡Œä¸€ä¸ªå¼‚æ­¥çš„ rebalance ï¼Ÿæ¥å‘¨æœŸæ€§çš„ä¿è¯æ ‘çš„å¹³è¡¡æ€§ï¼Œä¿è¯ç®—æ³•æ•ˆç‡ä¸ä¼šé€€åŒ–çš„å¤ªè¿‡åˆ†\nä½†æ˜¯å¾ˆæ˜¾ç„¶å¦‚æœè¦å¼‚æ­¥å¤„ç†ï¼Œæ¯æ¬¡ rebalance éƒ½éœ€è¦ O(n) çš„æ—¶é—´ä¸ç©ºé—´ï¼Œè¿˜éœ€è¦è€ƒè™‘ rebalance æœŸé—´çš„æ•°æ®è¯»å†™çš„åŒæ­¥é—®é¢˜ï¼Œè¿™æ ·å®ç°çš„å¤æ‚åº¦åˆå¾ˆé«˜äº†ï¼Œä¸å¦‚æ‰¾åˆ°ä¸€ç§æ›´é«˜æ•ˆçš„å¹³è¡¡æ–¹å¼ï¼ŒæŠŠ rebalance çš„æ“ä½œå‡æ‘Šåˆ°æ¯æ¬¡æ“ä½œä¸­\nå®Œæ•´ä»£ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 interface Bst\u003cK extends Comparable\u003cK\u003e, V\u003e { V find(K k); void insert(K k, V v); void remove(K k); int size(); void delMin(); V findMin(); } public class BstTree\u003cK extends Comparable\u003cK\u003e, V\u003e implements Bst\u003cK, V\u003e { private Node root; @Override public V find(K k) { final Node node = find(root, k); if (node != null) { return node.v; } else { return null; } } private Node find(Node n, K k) { if (n == null) { return null; } int cmp = k.compareTo(n.k); if (cmp \u003c 0) { return find(n.left, k); } else if (cmp \u003e 0) { return find(n.right, k); } else { return n; } } @Override public void insert(K k, V v) { insert(root, k, v); } private Node insert(Node node, K k, V v) { if (node == null) { return new Node(k, v); } int cmp = k.compareTo(node.k); if (cmp \u003c 0) { node.left = insert(node.left, k, v); } else if (cmp \u003e 0) { node.right = insert(node.right, k, v); } else { node.v = v; } node.size = size(node.left) + size(node.right) + 1; return node; } @Override public void remove(K k) { remove(root, k); } private Node remove(Node x, K k) { final int cmp = x.k.compareTo(k); if (cmp \u003c 0) { //IMPORTANT è¿™é‡Œæ˜¯é€’å½’çš„è®¾ç½® x èŠ‚ç‚¹çš„ left æŒ‡é’ˆï¼Œä¸èƒ½ç›´æ¥ return x.left = remove(x.left, k); } else if (cmp \u003e 0) { x.right = remove(x.right, k); } else { //æ‰¾åˆ°äº† è¦åˆ é™¤çš„èŠ‚ç‚¹ if (x.left == null) { //å·¦å­æ ‘ä¸ºç©ºï¼Œç›´æ¥è¿”å›å³å­æ ‘ å›¾ä¸­ åˆ é™¤ 3 çš„ case return x.right; } if (x.right == null) { //å³å­æ ‘ä¸ºç©ºï¼Œç›´æ¥è¿”å›å·¦å­æ ‘ å›¾ä¸­åˆ é™¤ 22 çš„ case return x.left; } //å·¦å³éƒ½ä¸ä¸ºç©º Node tmp = x; x = findMin(x.right); x.right = delMin(x.right); x.left = tmp.left; } x.size = size(x.left) + size(x.right) + 1; return x; } @Override public int size() { return size(root); } @Override public void delMin() { delMin(root); } private Node delMin(Node node) { if (node.left == null) { return node.right; } node.left = delMin(node.left); node.size = size(node.left) + size(node.right) + 1; return node; } @Override public V findMin() { if (root == null) { return null; } return findMin(root).v; } public Node findMin(Node n) { if (n.left == null) { return n; } return findMin(n.left); } private int size(Node n) { return n.size; } private class Node { K k; V v; Node left; Node right; int size; public Node(K k, V v) { this.k = k; this.v = v; this.size = 1; } } } Reference å®ç°æ€è·¯å‚è€ƒäº† ã€Šç®—æ³•ï¼ˆç¬¬å››ç‰ˆï¼‰ã€‹ä¸­ äºŒå‰æŸ¥æ‰¾æ ‘ çš„éƒ¨åˆ†ï¼Œä¹¦ä¸­çš„ç›¸å…³ç« èŠ‚è®¨è®ºäº†å¾ˆå¤šå…³äº BST æ•ˆç‡çš„é—®é¢˜ï¼Œå…¶ä»–ç« èŠ‚å¯¹ä¸€äº›åŸºç¡€ç®—æ³•éƒ½æœ‰è¯¦ç»†çš„ä»‹ç»ä¸è§£æï¼Œä»¥åŠä¸°å¯Œçš„æµ‹è¯•ç”¨ä¾‹ä¸ä¹ é¢˜ï¼Œæ¨èæŒ‡æ•°ï¼šğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ\nè¿™ä¸ªç®—æ³•çš„å®ç°ï¼Œå¯ä»¥è§£å†³ä¸‹åˆ—\n701. äºŒå‰æœç´¢æ ‘ä¸­çš„æ’å…¥æ“ä½œ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ 450. åˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„èŠ‚ç‚¹ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ 669. ä¿®å‰ªäºŒå‰æœç´¢æ ‘ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰ 108. å°†æœ‰åºæ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰\n","description":"","tags":null,"title":"ä» 0 æ„é€ ä¸€ä¸ª BST","uri":"/posts/%E4%BB%8E-0-%E6%9E%84%E9%80%A0%E4%B8%80%E4%B8%AA-bst/"},{"categories":["Reading"],"content":"å› ä¸ºä¹‹å‰çš„ä¸€äº›æ¥è§¦ï¼Œå¯¹æŸäº›æ¶æ„å¸ˆçš„å°è±¡ä¸æ˜¯å¾ˆå¥½ï¼Œçº¯ ppterï¼Œå¯¹æ¶æ„çš„ç†è§£ä¹Ÿè¿‡äºç‰‡é¢ï¼Œè®¤ä¸ºä¹Ÿéå°±æ˜¯åšä¸€äº›æŠ€æœ¯é€‰å‹ï¼Œç”»ä¸€ä¸ªå¥½çœ‹çš„ppt è·Ÿè€æ¿æ±‡æŠ¥\né€šç¯‡çœ‹ä¸‹æ¥ï¼Œè‡ªå·±ä¹‹å‰çš„è®¤çŸ¥æ˜¯æœ‰äº›ç‹­éš˜äº†ï¼Œä¸€ä¸ªå¼€å‘äººå‘˜ï¼Œåœ¨æ—¥å¸¸çš„ç¼–ç ä¸­ï¼Œå®é™…ä¸Šæ— æ—¶æ— åˆ»ä¸åœ¨æ¥è§¦æ¶æ„ï¼Œè‰¯å¥½çš„ä»£ç ç»“æ„ä¸è®¾è®¡ï¼Œå°±æ˜¯ä¸€ä¸ªå¥½æ¶æ„ï¼Œäº‹å®ä¸Šçš„æ•´æ´æ¶æ„ï¼Œå°±æ˜¯æ•´æ´çš„ä»£ç è®¾è®¡ï¼›\nè½¯ä»¶è®¾è®¡åŸåˆ™ å¦‚æœæŠŠ solid å½“ä½œå…«è‚¡æ–‡åˆ™ solid å®Œå…¨å¤±å»äº†æ„ä¹‰ï¼Œè¿™äº›åŸåˆ™çœ‹èµ·æ¥éå¸¸ç®€å• ä½†æ˜¯è·µè¡Œè¿™äº›åŸåˆ™ éœ€è¦çš„ä¸æ˜¯ç”Ÿæ¬ç¡¬å¥— è€Œæ˜¯æ ¹æ®åŸåˆ™èƒ½è¿›è¡Œå–èˆï¼Œåœ¨åº”ç”¨ä¸­çœŸæ­£çš„ç”¨è¿™äº›åŸåˆ™åšåˆ°è§£è€¦å’Œï¼Œ å…¶å®æ˜¯ä¸€ä»¶æ¯”è¾ƒå›°éš¾çš„äº‹ è€Œè¿™ ä¹Ÿä¸åªæ˜¯å•çº¯çš„é ç¼–ç¨‹ç»éªŒå°±èƒ½åšåˆ°çš„\nSOLID çš„åŸºæœ¬åŸåˆ™å¾ˆç®€å•ï¼Œæ¯ä¸€æ¡çœ‹èµ·æ¥éƒ½ç®€å•åˆ°ä¸èƒ½å†ç®€å•ï¼Œä¸¤å¥è¯å°±èƒ½è§£é‡Šæ˜ç™½ï¼Œ\nSRP: å•ä¸€èŒè´£åŸåˆ™ï¼Œä¸€ä¸ª OCP: å¼€é—­åŸåˆ™ LSP: é‡Œæ°æ›¿æ¢åŸåˆ™ ISPï¼šæ¥å£éš”ç¦»åŸåˆ™ DIPï¼šä¾èµ–åè½¬åŸåˆ™ ä½œè€…ç”¨äº†å¤§åŠæœ¬ä¹¦çš„å†…å®¹æ¥è¯´æ˜è¯ é‡Šè¿™äº›åŸåˆ™ï¼Œç”¨å…·ä½“çš„å®é™…æƒ…å†µæ¥è¯´æ˜æˆ‘ä»¬å¦‚ä½•æ›´å¥½çš„ç¼–ç ï¼Œå¦‚ä½•è¿›è¡Œå–èˆï¼Œå¦‚ä½•åšæ¶\nå¦‚æœæˆ‘ä»¬åœ¨åœ¨crud çš„è¿‡ç¨‹ä¸­èƒ½åå¤æ¨æ•²ï¼Œæ€è€ƒä¸æŠ½è±¡ï¼Œé‚£ä¹ˆèƒ½å¸¦æ¥çš„å¸®åŠ©ä¸æå‡ï¼Œç›¸ä¿¡ä¼šéå¸¸ä¹‹å¤§\nè¯´å›æœ¬ä¹¦ï¼Œæ— è®ºä¸ªäººç›®æ ‡æ˜¯å¦æ˜¯ç§°ä¸ºä¸€ä¸ªæ¶æ„å¸ˆ ä½œä¸ºä¸€ä¸ªå¼€å‘äººå‘˜ç¡®å®åº”è¯¥åº”è¯¥å¤šè¯»å‡ é\n","description":"","tags":null,"title":"è¯»ã€Šæ¶æ„æ•´æ´ä¹‹é“ã€‹","uri":"/posts/%E8%AF%BB%E6%9E%B6%E6%9E%84%E6%95%B4%E6%B4%81%E4%B9%8B%E9%81%93/"},{"categories":["Technolgic"],"content":"Summary ä¸€æ¬¡ç”¨ Java å¤„ç† heif æ ¼å¼æ–‡ä»¶çš„ç¢ç¢å¿µ\nèƒŒæ™¯ åœ¨ç»´æŠ¤æˆ‘å¸çš„ä¸€ä¸ªæ–‡æ¡£å¤„ç†æœåŠ¡ï¼Œä¸»è¦æ˜¯åŠŸèƒ½æ˜¯æŠŠå„ç§ç±»å‹çš„æ–‡ä»¶ï¼Œç»Ÿä¸€è½¬æˆ pdf æ·»åŠ æ°´å°ï¼Œç„¶åå‰ç«¯é€šè¿‡é€šè¿‡ pdfview ç»Ÿä¸€æ¸²æŸ“ pdf ï¼Œå®ç°å„ç§æ–‡ä»¶åœ¨çº¿é¢„è§ˆçš„åŠŸèƒ½\nåº•å±‚ç”¨åˆ°çš„æœåŠ¡æ¯”è¾ƒå¤šï¼Œå¤§éƒ¨åˆ†æ–‡æ¡£æ˜¯é€šè¿‡ openoffice æ¥å®ç°ï¼Œå„ç§ç±»å‹çš„å›¾ç‰‡èµ„æºæ˜¯é€šè¿‡ itext æ¥æ”¯æŒçš„ï¼Œä½†æ˜¯ itext çš„ ImageData æ²¡æ³•æ”¯æŒ heif æ ¼å¼ã€‚éœ€è¦å•ç‹¬æ”¯æŒä¸€ä¸‹ heif è½¬ pdf åŠŸèƒ½\nè¿‡ç¨‹ å…ˆæµ‹è¯•äº†ä¸‹ openoffice è·Ÿ itext ï¼Œå‘ç°ç¡®å®ä¸èƒ½ç›´æ¥æ”¯æŒé‚£å‰©ä¸‹çš„æ–¹æ¡ˆä¼˜å…ˆè€ƒè™‘ç¤¾åŒºå¼€æºçš„ java æ–¹æ¡ˆ\nä½†æ˜¯çœ‹ä¸‹æ¥ï¼Œä¹Ÿæ²¡æœ‰ pure java çš„å®ç°\nTwelveMonkeys æ˜¯ä¸€ä¸ª Java å›¾ç‰‡ç±»å‹å¤„ç†åº“ï¼Œä½†æ˜¯ç°åœ¨æ²¡æœ‰æ”¯æŒ heif ç±»å‹çš„å›¾ç‰‡\nharaldk/TwelveMonkeys#440 HEIF support\nçœ‹èµ·æ¥é™¤éæœ‰äººæ„¿æ„å®ç°æˆ–è€…èµ„é‡‘æ”¯æŒï¼Œå¦åˆ™ä½œè€…è‡ªå·±åº”è¯¥ä¸ä¼šè¿›è¡Œ HEIF çš„æ”¯æŒäº†\nç„¶å issue é‡Œæåˆ°çš„ NightMonkeys æ˜¯åŸºäº libheif å®ç°çš„ï¼Œä½†æ˜¯è¦æ±‚ Java22+ , çº¿ä¸Šä»£ç è¿˜åœç•™åœ¨ç¥–ä¼ çš„ Java8 ï¼Œè¿™ä¸ªåº“ä¹Ÿæ²¡æ³•ç›´æ¥ç”¨\nGitHub - gotson/NightMonkeys: Additional plug-ins and extensions for Javaâ€™s Iâ€¦\né‚£ä¹ˆåŸºæœ¬å°±å‰©ä¸‹ JNI è·Ÿ è°ƒç”¨å‘½ä»¤ä¸¤ä¸ªæ–¹æ¡ˆäº†ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼Œè°ƒç”¨å‘½ä»¤å¯èƒ½å®ç°æ›´ç®€å•ä¸€äº›ï¼Œé—®é¢˜å°±åªå‰©ä¸‹æ€ä¹ˆæŠŠ libheif æ‰“å…¥é•œåƒäº†\nlibheif åº•å±‚ä¾èµ– libde265\nç”±äºå„ç§ç½‘ç»œç¯å¢ƒçš„é™åˆ¶ï¼Œå·²ç»ä¸€äº›å…¶ä»–ï¼Œæ‰“é•œåƒå¯è°“æ˜¯ä¸€æ³¢ä¸‰æŠ˜\nåŸºç¡€é•œåƒæ˜¯ä¸€ä¸ªåŸºäº centos7\næ„å»ºæœºå™¨è®¿é—®å¤–ç½‘ä¹Ÿæœ‰é™åˆ¶ï¼Œæ²¡æ³•ç›´æ¥é€šè¿‡ yum å®‰è£…\nè½¬è€Œå°è¯•è‡ªå·±ç¼–è¯‘ï¼Œç¼–è¯‘çš„æ—¶å€™ï¼Œå‘ç° yum å®‰è£…çš„ cmake æ˜¯ 2.x ï¼Œç¼–è¯‘ libheif éœ€è¦ cmake 3.21 ä»¥ä¸Š\nåˆéœ€è¦æ‰‹åŠ¨å®‰è£… cmake å¥½åœ¨ cmake æœ‰æä¾›ç°æˆçš„ .sh è„šæœ¬ï¼Œç›´æ¥åŠ å…¥åˆ°é•œåƒé‡Œæ‰§è¡Œå³å¯\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 FROM baseimage MAINTAINER xxx USER root COPY repo.sh /root/repo.sh RUN sh /root/repo.sh RUN yum-config-manager --disable updates RUN yum makecache RUN yum groupinstall \"Development Tools\" -y RUN yum install libjpeg-turbo-devel libpng-devel libtiff-devel -y COPY cmake-3.29.8-linux-x86_64.sh /root/cmake-3.29.8-linux-x86_64.sh RUN chmod +x /root/cmake-3.29.8-linux-x86_64.sh RUN /root/cmake-3.29.8-linux-x86_64.sh --prefix=/usr/local --skip-license RUN mkdir \"/root/heif/\" COPY heif.sh /root/heif/heif.sh COPY libde265-1.0.15.tar.gz /root/heif COPY libheif-1.18.2.tar.gz /root/heif RUN sh /root/heif/heif.sh ç„¶åå°±æ˜¯ç¼–è¯‘å®‰è£… libde265 ä»¥åŠ libheif\næ¯”è¾ƒå‘çš„æ˜¯ ld éƒ¨åˆ†ï¼Œä¸çŸ¥é“ä¸ºå•¥è¿™ä¸ªé•œåƒæ²¡æ³•åŠ è½½ /usr/local/lib ä»¥åŠ /usr/local/lib64 ä¸‹çš„åŠ¨æ€åº“ï¼Œå¯¼è‡´å‘½ä»¤å®‰è£…æˆåŠŸï¼Œä½†æ˜¯æ‰§è¡Œä¼šæŠ¥é”™ï¼Œæç¤ºåŠ¨æ€åº“åŠ è½½ä¸åˆ°\nåæ¥å•ç‹¬è®¾ç½®äº†ä¸€ä¸‹ï¼ŒæŠŠ /usr/local/lib ä»¥åŠ /usr/local/lib64 éƒ½åŠ å…¥åˆ° ld çš„æ–‡ä»¶å¤¹ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 base=/root/heif/ cd $base tar zxvf libde265-1.0.15.tar.gz tar zxvf libheif-1.18.2.tar.gz cd $base/libde265-1.0.15 ./autogen.sh ./configure make \u0026\u0026 make install echo \"/usr/local/lib\" \u003e /etc/ld.so.conf.d/lib256.conf cd $base/libheif-1.18.2 mkdir build cd build cmake --preset=release .. make \u0026\u0026 make install echo \"/usr/local/lib64\" \u003e /etc/ld.so.conf.d/libheif.conf ldconfig æ„å»ºå¥½çš„é•œåƒå°±åŠ å…¥äº† heif-convert å‘½ä»¤ï¼Œåœ¨ java ç¨‹åºä¸­ï¼Œç›´æ¥ä½¿ç”¨ ProcessBuilder è°ƒç”¨ heif-convert å³å¯\næ€è€ƒ è¿™ç§æ–¹æ¡ˆå¹¶ä¸èƒ½è¯´æ˜¯ä¸€ä¸ªå¥½æ–¹æ¡ˆï¼Œä¾èµ–åº•å±‚ç¯å¢ƒï¼Œè¿™ç§æ–¹æ¡ˆï¼Œæ¢ä¸ªç¯å¢ƒå°±æ˜¯ä¸ªå‘ï¼Œä½†æ˜¯åœ¨ docker çš„åŠ æŒä¸‹ï¼Œè¿™ç§æ–¹æ¡ˆå¯èƒ½ç®—æ˜¯ä¸€ç§æ¯”è¾ƒå¿«é€Ÿçš„è§£å†³æ–¹æ¡ˆ\næ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œç¡®å®æ²¡å°‘é—® GPT ï¼ŒæŠ€æœ¯ç±»é—®é¢˜ï¼Œ GPT ä¹Ÿä¸æ˜¯çœŸå…¨çŸ¥å…¨èƒ½ï¼Œä¹Ÿä¼šçç€çœ¼ç›è¯´çè¯ï¼Œè¿™ä¸ªåœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œæ˜¯éœ€è¦è‡ªå·±å»ç”„åˆ«æµ‹è¯•çš„ï¼Œä½†æ˜¯ç¡®å®èƒ½èŠ‚çº¦ä¸€äº›æœç´¢æ—¶é—´ã€‚ç°åœ¨ GPT å¯¹æˆ‘æ¥è¯´å·®ä¸å¤šèƒ½æ›¿ä»£ 70% åœ¨æœç´¢å¼•æ“ä¸Šçš„ä½¿ç”¨åœºæ™¯\n","description":"","tags":["java"],"title":"Java å¤„ç† heif æ–‡ä»¶","uri":"/posts/java-%E5%A4%84%E7%90%86-heif-%E6%96%87%E4%BB%B6/"},{"categories":["Technolgic","technolgic"],"content":"Summary è®°ä¸€æ¬¡ CPU é«˜å ç”¨çš„æ’æŸ¥è¿‡ç¨‹\nç”±äº CodeCache è®¾ç½®è¿‡å°å¯¼è‡´ C2 Compile å ç”¨ CPU çš„é—®é¢˜æ’æŸ¥è¿‡ç¨‹åŠåŸå› åˆ†æ\näº‹ä»¶ é‚®ä»¶æœåŠ¡æ”¶åˆ°å‘Šè­¦ï¼ŒæœåŠ¡æŒ‚æ‰äº†ï¼Œè¿åˆ°æœºå™¨ä¸ŠæŸ¥çœ‹å‘ç°æœåŠ¡è¿˜åœ¨è¿è¡Œï¼Œä½†æ˜¯è¯·æ±‚ä¸èƒ½æ­£å¸¸å“åº”ï¼ŒæœåŠ¡å¡æ­»\nTOP å‘½ä»¤è§‚å¯Ÿå‘ç° CPU æŒç»­ç»´æŒåœ¨ 200+ ä»¥ä¸Šï¼Œé‚é‡å¯å®ä¾‹ï¼Œé‡å¯å®ä¾‹ä»¥åï¼ŒæœåŠ¡æ¢å¤ï¼Œä½†æ˜¯ CPU å ç”¨è¿˜æ˜¯ä¼šå‘¨æœŸæ€§çš„é£™å‡åˆ° 100+\nä½†æ˜¯å¾ˆå¿« CPU å°±ä¼šé™ä½åˆ°æ­£å¸¸å€¼ï¼Œè¿‡ä¸€ä¼šåˆé£™èµ·æ¥äº†\næ’æŸ¥ CPU é«˜çš„åŸºæœ¬è¿‡ç¨‹ ATTACH å…ˆç”¨ top -Hp pid æŸ¥çœ‹çº¿ç¨‹ä¿¡æ¯\n\u003c_20240227_194922screenshot.png\u003e\n1 2 \u003e printf \"%x\\n\" 72 48 ç”±äºå®¹å™¨å†…æ²¡æœ‰ arthas ï¼Œå…ˆç”¨ jstack è§‚å¯Ÿä¸€ä¸‹\n1 2 jstack 28 | grep \"0x48\" \"C2 CompilerThread1\" #9 daemon prio=9 os_prio=0 tid=0x00007fa258d0f000 nid=0x48 waiting on condition [0x0000000000000000] å‘ç°æ˜¯ C2 ç¼–è¯‘çº¿ç¨‹ï¼Œè€Œä¸”é‚£å‡ ä¸ªçº¿ç¨‹ id éƒ½æ˜¯è¿ç»­çš„ï¼Œå¤§æ¦‚ç‡éƒ½æ˜¯ C2 ç›¸å…³çš„å‡ ä¸ªçº¿ç¨‹\n1 2 3 4 5 6 7 8 9 jstack 28 | grep \"C2\" \"C2 CompilerThread7\" #15 daemon prio=9 os_prio=0 tid=0x00007fa258d24800 nid=0x4e waiting on condition [0x0000000000000000] \"C2 CompilerThread6\" #14 daemon prio=9 os_prio=0 tid=0x00007fa258d22800 nid=0x4d waiting on condition [0x0000000000000000] \"C2 CompilerThread5\" #13 daemon prio=9 os_prio=0 tid=0x00007fa258d20000 nid=0x4c waiting on condition [0x0000000000000000] \"C2 CompilerThread4\" #12 daemon prio=9 os_prio=0 tid=0x00007fa258d1e000 nid=0x4b waiting on condition [0x0000000000000000] \"C2 CompilerThread3\" #11 daemon prio=9 os_prio=0 tid=0x00007fa258d13800 nid=0x4a waiting on condition [0x0000000000000000] \"C2 CompilerThread2\" #10 daemon prio=9 os_prio=0 tid=0x00007fa258d11800 nid=0x49 waiting on condition [0x0000000000000000] \"C2 CompilerThread1\" #9 daemon prio=9 os_prio=0 tid=0x00007fa258d0f000 nid=0x48 waiting on condition [0x0000000000000000] \"C2 CompilerThread0\" #8 daemon prio=9 os_prio=0 tid=0x00007fa258d0d000 nid=0x47 waiting on condition [0x0000000000000000] 1 2 printf \"%d\\n\" 0x4e 78 æ‰€ä»¥å®šä½åˆ°çš„æ˜¯ C2 å¯¼è‡´çš„ CPU é«˜å ç”¨\nåˆ†æ C2 æ˜¯ JVM ç”¨æ¥è¿›è¡Œ JIT ç¼–è¯‘çš„çº¿ç¨‹ï¼Œå…¶è¿‡ç¨‹æ˜¯æŠŠ byteCode ç¼–è¯‘ä¸º nativeCode çš„çº¿ç¨‹\næŒ‰é“ç†æ˜¯ä¸åº”è¯¥é•¿æ—¶é—´å ç”¨ CPU èµ„æºæ¥æ‰§è¡Œä»£ç ç¼–è¯‘æ“ä½œï¼Œæ‰¾äº†ä¸€åœˆèµ„æ–™ï¼Œå‘ç°åŸºæœ¬æœ‰ä¸€ä¸‹å‡ ä¸ªè§£å†³åŠæ³•\nä»€ä¹ˆéƒ½ä¸åš å¶å‘çš„æƒ…å†µä¸‹ï¼Œç¡®å®å¯ä»¥ä»€ä¹ˆéƒ½ä¸åšï¼Œåªä¼šæ˜¯ä¸€ä¸ªçŸ­æœŸçš„å½±å“\nå…³é—­åˆ†å±‚ç¼–è¯‘ é€šè¿‡æ§åˆ¶ --TieredCompilation å‚æ•°ï¼Œå¯ä»¥å¼ºåˆ¶å…³é—­ C2 åˆ†å±‚ç¼–è¯‘ï¼Œä½†æ˜¯è‚¯å®šä¼šå¯¹æ€§èƒ½æœ‰å½±å“\nè¿™æ˜¯ä½œä¸ºæœ€åçš„æ–¹æ¡ˆ\nå…¶ä»– é¢„çƒ­ç­‰æ–¹æ¡ˆï¼Œä½†æ˜¯ä¸æˆ‘é‡åˆ°çš„å®é™…æƒ…å†µä¸ç¬¦è¿˜æœ‰ä¸€ä¸ªåˆ©ç”¨ GBD æ’æŸ¥çš„ï¼Œä½†æ˜¯åªæ˜¯ä¸€ä¸ªæ’æŸ¥è¿‡ç¨‹ï¼Œå¯ä»¥ç»™åˆ°ä¸€ä¸ªå¯å‘æ€è·¯ï¼Œä½†æ˜¯æ²¡æœ‰æœ€ç»ˆè§£å†³é—®é¢˜\nè§£å†³ åœ¨çº¿ä¸‹ç¯å¢ƒä¾ç„¶èƒ½ç¨³å®šå¤ç°ï¼Œæƒ³åœ¨çº¿ä¸‹ç¯å¢ƒè£…ä¸ª arthas , å¶ç„¶çš„æƒ…å†µä¸‹ï¼Œçªç„¶å‘ç° C2 å ç”¨æ˜¯æœ‰ä¸€å®šè§„åˆ™çš„ï¼Œæ¯æ¬¡æœ‰è¯·æ±‚è¿›æ¥çš„æ—¶å€™ï¼ŒC2 å°±ä¼šå¼€å§‹æ‰§è¡Œç¼–è¯‘\nå¯ä»¥ç¨³å®šå¤ç°ï¼Œäºæ˜¯æ’æŸ¥ JVM å‚æ•°\nå‘ç° -XX:ReservedCodeCacheSize=32m ä¿®æ”¹åˆ° 512m å C2 çš„ CPU å ç”¨é™ä½\né—®é¢˜æ¢ç©¶ ä»ç°è±¡çœ‹ï¼Œåº”è¯¥è·Ÿ CodeCache æœ‰å…³ç³»ï¼Œä½†æ˜¯å…·ä½“åŸå› æš‚æ—¶ä¸æ¸…æ¥šï¼Œå…ˆè·Ÿè¸ªä¸€ä¸‹ CodeCache çš„æƒ…å†µ\nID NAME GROUP PRIORITY STATE %CPU DELTA_TIME TIME INTERRUPTE DAEMON -1 C2 CompilerThread4 - -1 - 3.24 0.161 1:2.351 false true -1 C2 CompilerThread1 - -1 - 3.15 0.157 0:59.482 false true -1 C2 CompilerThread7 - -1 - 1.01 0.050 0:57.240 false true -1 C2 CompilerThread0 - -1 - 0.52 0.026 0:57.014 false true -1 C2 CompilerThread2 - -1 - 0.35 0.017 1:2.947 false true -1 C1 CompilerThread8 - -1 - 0.3 0.014 0:10.679 false true -1 C1 CompilerThread9 - -1 - 0.29 0.014 0:10.745 false true -1 C2 CompilerThread6 - -1 - 0.28 0.013 1:3.782 false true -1 C2 CompilerThread3 - -1 - 0.27 0.013 0:58.764 false true 309 SimplePauseDetectorThread_0 main 5 TIMED_WAIT 0.27 0.013 0:4.131 false true 310 SimplePauseDetectorThread_1 main 5 TIMED_WAIT 0.26 0.012 0:4.213 false true 311 SimplePauseDetectorThread_2 main 5 TIMED_WAIT 0.25 0.012 0:4.163 false true Memory used total max usage GC heap 1067M 4096M 4096M 26.05% gc.g1_young_generation.count 34 g1_eden_space 470M 948M -1 49.58% gc.g1_young_generation.time(ms) 2926 g1_survivor_space 128M 128M -1 100.00% gc.g1_old_generation.count 0 g1_old_gen 469M 3020M 4096M 11.45% gc.g1_old_generation.time(ms) 0 nonheap 175M 192M -1 90.94% code_cache 20M 28M 32M 64.11% metaspace 137M 145M -1 94.45% compressed_class_space 16M 18M 1024M 1.65% direct 136K 136K - 100.00% mapped 0K 0K - 0.00% Runtime os.name Linux os.version 3.10.0-1160.92.1.el7.x86_64 java.version 1.8.0_60 java.home /home/work/1.8.0_60/jre systemload.average 0.14 processors 16 timestamp/uptime Wed Feb 28 10:54:33 CST 2024/2052s ID NAME GROUP PRIORITY STATE %CPU DELTA_TIME TIME INTERRUPTE DAEMON -1 C2 CompilerThread0 - -1 - 15.87 0.793 0:57.807 false true -1 C2 CompilerThread6 - -1 - 11.8 0.590 1:4.372 false true -1 C2 CompilerThread1 - -1 - 3.85 0.192 0:59.675 false true -1 C2 CompilerThread2 - -1 - 1.74 0.086 1:3.034 false true -1 C2 CompilerThread4 - -1 - 1.37 0.068 1:2.420 false true -1 C2 CompilerThread7 - -1 - 1.14 0.057 0:57.297 false true -1 C2 CompilerThread3 - -1 - 0.8 0.040 0:58.804 false true -1 C2 CompilerThread5 - -1 - 0.53 0.026 0:56.526 false true 309 SimplePauseDetectorThread_0 main 5 TIMED_WAIT 0.3 0.014 0:4.146 false true 311 SimplePauseDetectorThread_2 main 5 TIMED_WAIT 0.29 0.014 0:4.177 false true 310 SimplePauseDetectorThread_1 main 5 TIMED_WAIT 0.28 0.014 0:4.227 false true -1 C1 CompilerThread9 - -1 - 0.27 0.013 0:10.759 false true Memory used total max usage GC heap 1067M 4096M 4096M 26.05% gc.g1_young_generation.count 34 g1_eden_space 470M 948M -1 49.58% gc.g1_young_generation.time(ms) 2926 g1_survivor_space 128M 128M -1 100.00% gc.g1_old_generation.count 0 g1_old_gen 469M 3020M 4096M 11.45% gc.g1_old_generation.time(ms) 0 nonheap 174M 192M -1 90.64% code_cache 19M 28M 32M 62.31% metaspace 137M 145M -1 94.45% compressed_class_space 16M 18M 1024M 1.65% direct 136K 136K - 100.00% mapped 0K 0K - 0.00%\nå¯ä»¥è§‚å¯Ÿåˆ°çš„ç°è±¡æœ‰ä¸€ä¸‹å‡ ç‚¹\nç³»ç»Ÿç©ºé—²æ—¶ï¼ŒC2 è¿˜æ˜¯ä¼šæŒç»­æ€§çš„æ‰§è¡Œ JIT ç¼–è¯‘ï¼Œå¹³å‡æ¯ä¸ªçº¿ç¨‹å ç”¨åœ¨ 2% å·¦å³ ç³»ç»Ÿå“åº”æ—¶ï¼ŒC2 çº¿ç¨‹çš„ CPU ä¼šæ€¥å‰§ä¸Šå‡ code_cache ä¸€ç›´åœ¨ 50%-80% ä¹‹é—´æµ®åŠ¨ C2 åœ¨å®¹å™¨é‡Œçš„çº¿ç¨‹æ•°æœ‰ 8 ä¸ªï¼Œä½†æ˜¯ CPU å®é™…åœ¨ POD æŒ‡å®šçš„ CPU æ˜¯ 4 æ ¸å¿ƒ è°ƒæ•´ -XX:ReservedCodeCacheSize=1024m\nID NAME GROUP PRIORITY STATE %CPU DELTA_TIME TIME INTERRUPTE DAEMON 311 SimplePauseDetectorThread_0 main 5 TIMED_WAIT 0.21 0.010 0:3.103 false true 313 SimplePauseDetectorThread_2 main 5 TIMED_WAIT 0.21 0.010 0:3.077 false true 312 SimplePauseDetectorThread_1 main 5 TIMED_WAIT 0.2 0.009 0:3.164 false true 111 ee-ext-count-1 main 5 TIMED_WAIT 0.07 0.003 0:1.493 false false 82 Timer-for-arthas-dashboard-eaff5 system 5 RUNNABLE 0.07 0.003 0:1.088 false true -1 VM Periodic Task Thread - -1 - 0.05 0.002 0:1.112 false true -1 Unknown Thread - -1 - 0.05 0.002 0:1.054 false true 68 trace-collector main 5 TIMED_WAIT 0.04 0.002 0:1.264 false false 299 ee-ext-12 main 5 TIMED_WAIT 0.03 0.001 0:0.016 false false 47 activiti-acquire-timer-jobs main 5 TIMED_WAIT 0.03 0.001 0:0.370 false false 41 SimplePauseDetectorThread_0 system 9 TIMED_WAIT 0.02 0.001 0:0.636 false true 198 ee-ext-core-client-15 main 5 WAITING 0.02 0.001 0:0.015 false false Memory used total max usage GC heap 906M 4096M 4096M 22.13% gc.g1_young_generation.count 27 g1_eden_space 324M 948M -1 34.18% gc.g1_young_generation.time(ms) 2492 g1_survivor_space 128M 128M -1 100.00% gc.g1_old_generation.count 0 g1_old_gen 454M 3020M 4096M 11.10% gc.g1_old_generation.time(ms) 0 nonheap 202M 209M -1 96.85% code_cache 63M 63M 1024M 6.18% metaspace 124M 129M -1 95.97% compressed_class_space 15M 16M 1024M 1.47% direct 80K 80K - 100.00% mapped 0K 0K - 0.00% Runtime\nC2 çš„ CPU æ˜¾è‘—é™ä½ code_cache ç»´æŒçš„ 63M å·¦å³,ä¼šéšç€ç³»ç»Ÿè¿è¡Œè¿‡ç¨‹é€æ­¥å¢åŠ \né—®é¢˜å¾ˆæ˜æ˜¾äº†ï¼Œ code_cache ä¸è¶³ä¼šå¯¼è‡´ C2 æŒç»­çš„ç¼–è¯‘æ“ä½œ,é•¿æ—¶é—´å ç”¨ CPU ï¼Œå¯¼è‡´ç¨‹åºå“åº”ç¼“æ…¢\nOracle å®˜æ–¹æ–‡æ¡£ä¸­æœ‰å¦‚ä¸‹ä¸€æ®µå†…å®¹\nKeep in mind that the codecache starts relatively small and then grows as needed as new methods are compiled.Sometimes compiled methods are freed from the codecache, especially when the maximum size of the codecache is constrained. The memory used by free methods can be reused for newly compiled methods, allowing additional methods to be compiled without growing the codecache further. â€“ 15 Codecache Tuning (Release 8)\næ„å‘³è¿™åœ¨å½“ é™åˆ¶äº† codecache çš„æƒ…å†µä¸‹ï¼Œå·²ç»è¢«ç¼–è¯‘çš„ä»£ç ä¼šè¢«ä» codecache ä¸­é‡Šæ”¾å‡ºæ¥ï¼Œè¿™å¤§æ¦‚å°±æ˜¯å½“ ReservedCodeCacheSize=32m çš„æ—¶å€™ï¼ŒC2 ä¼šæŒç»­æ€§å ç”¨ CPU çš„ç¼˜æ•…ï¼Œç”±äº codecache æœ€å¤§å€¼çš„é™åˆ¶ï¼Œå¯¼è‡´äº† JIT ç¼–è¯‘çš„ä»£ç è¢«ä» codecache é‡Šæ”¾å‡ºæ¥ï¼Œè€Œåæœ‰ç”±äºæœ‰æ–°çš„è¯·æ±‚ï¼Œå¯¼è‡´éƒ¨åˆ†ä»£ç åˆé€šè¿‡ C2 æ‰§è¡Œ JIT ç¼–è¯‘ï¼Œå¦‚æ­¤å¾€å¤å¾ªç¯ï¼Œå¯¼è‡´ C2 å‘¨æœŸæ€§çš„é«˜å ç”¨ CPU\nRefrence Java C2 CompilerThread é•¿æœŸå ç”¨ CPU è¿‡é«˜ï¼Œå¦‚ä½•æŸ¥æ‰¾åŸå› ï¼Ÿ | HeapDumpæ€§èƒ½ç¤¾åŒº Analyzing a stuck HotSpot C2 compilation | by Vladimir Sitnikov | netcracker â€¦ jvmç¼–è¯‘å™¨å‚æ•°åŠè¸©å‘-å¼ƒç”¨C2 | Zongâ€™s blog ã€é—®é¢˜æ’æŸ¥ç³»åˆ—ã€‘C2 compilerthread å¸¦æ¥çš„CPUæŠ–åŠ¨é—®é¢˜ - æ˜é‡‘ èŠèŠjvmçš„Code Cache - ç®€ä¹¦ 15 Codecache Tuning (Release 8) Introduction to JVM Code Cache | Baeldung","description":"","tags":["java","jvm"],"title":"JVM C1 C2 å ç”¨ CPU é—®é¢˜æ’æŸ¥","uri":"/posts/jvm-c1-c2-%E5%8D%A0%E7%94%A8-cpu-%E9%97%AE%E9%A2%98%E6%8E%92%E6%9F%A5/"},{"categories":["emacs","technolgic"],"content":"Summary åŸºäº emacs , ox-hugo , é›†æˆ github pages , æ­å»º blog\nåŸºç¡€ç¯å¢ƒå‡†å¤‡ åŸºæœ¬ä¾èµ–ç¯å¢ƒæ˜¯ `emacs` `hugo` `git`\nmacos ä¸‹ hugo çš„å®‰è£… 1 brew install hugo hugo æ˜¯åŸºäº go ç¼–å†™çš„ï¼Œä½†æ˜¯å¦‚æœæ˜¯éæºç æ ¼å¼å®‰è£…ï¼Œåº”è¯¥ä¸éœ€è¦å®‰è£… go ä¾èµ–\nå®‰è£…å®Œæˆä»¥åï¼Œä½¿ç”¨ hugo version æ£€æŸ¥\nhugo Quick Start é¦–å…ˆåˆ©ç”¨ hugo åˆ›å»ºä¸€ä¸ªç«™ç‚¹, è¿™ä¸ªå‘½ä»¤é»˜è®¤åˆ›å»ºçš„ä½ç½®æ˜¯å½“å‰å‘½ä»¤æ‰§è¡Œçš„æ‰€åœ¨ç›®å½•ä¸‹çš„\n1 2 3 hugo new site my-blog cd my-blog git init é»˜è®¤çš„ site çš„ç›®å½•ç»“æ„å¦‚ä¸‹\nâ”œâ”€â”€ archetypes â”‚Â â””â”€â”€ default.md â”œâ”€â”€ assets â”œâ”€â”€ content â”œâ”€â”€ data â”œâ”€â”€ hugo.toml â”œâ”€â”€ i18n â”œâ”€â”€ layouts â”œâ”€â”€ static â””â”€â”€ themes\nå®‰è£…ä¸€ä¸ªåŸºæœ¬çš„ theme\n1 2 git submodule add https://github.com/theNewDynamic/gohugo-theme-ananke.git themes/ananke echo \"theme = 'ananke'\" \u003e\u003e hugo.toml\" hugo server Watching for changes in /Users/zhangyang/github/my-blog/{archetypes,assets,content,data,i18n,layouts,static,themes} Watching for config changes in /Users/zhangyang/github/my-blog/hugo.toml, /Users/zhangyang/github/my-blog/themes/ananke/config.yaml Start building sites â€¦ hugo v0.122.0-b9a03bd59d5f71a529acb3e33f995e0ef332b3aa+extended darwin/arm64 BuildDate=2024-01-26T15:54:24Z VendorInfo=brew\nEN â€”â€”â€”â€”â€”â€”-+â€”â€“ Pages | 7 Paginator pages | 0 Non-page files | 0 Static files | 1 Processed images | 0 Aliases | 0 Sitemaps | 1 Cleaned | 0\nBuilt in 33 ms Environment: â€œdevelopmentâ€ Serving pages from memory Running in Fast Render Mode. For full rebuilds on change: hugo server â€“disableFastRender Web Server is available at http://localhost:1313/ (bind address 127.0.0.1) Press Ctrl+C to stop\nhugo çš„åŸºæœ¬ç¯å¢ƒæ­å»ºå®Œæˆï¼Œè®¿é—® http://localhost:1313 æŸ¥çœ‹ä¸€ä¸‹æ•ˆæœ\nhugo çš„åŸºæœ¬ç¯å¢ƒå·²ç»å®Œæˆï¼Œé…ç½®ä»¥åŠä¸»é¢˜ç­‰ä¼˜åŒ–åç»­åœ¨çœ‹çœ‹æ€ä¹ˆå¤„ç†\nemacs + ox-hugo æˆ‘çš„ emacs ç”¨çš„æ˜¯ doom emacs è¿›è¡Œçš„é…ç½®ï¼Œ scp f f ç¼–è¾‘ init.el , åœ¨ org çš„é…ç½®ä¸­ï¼Œå¯ç”¨ +hugo æ ‡è¯†\n1 (org +hugo) æ‰§è¡Œ\n1 doom sync å³å¯å®‰è£…\nå…³é”®å±æ€§ ox-hugo åœ¨ org-mode ä¸­çš„å…³é”®å±æ€§æœ‰ä¸¤ä¸ª\nHUGO_BASE_DIR ä»¥åŠ HUGO_SECTION\nHUGO_BASE_DIR ç”¨æ¥æŒ‡å®šç”Ÿæˆçš„ md æ–‡ä»¶çš„ base_dir\nåœ¨ org æ–‡ä»¶çš„å¤´éƒ¨è®¾å®šå¥½ HUGO_BASE_DIR\næ‰§è¡Œ M-x org-hugo-exoirt-to-md å³å¯å¯¼å‡º org æ–‡ä»¶åˆ°æŒ‡å®šçš„ hugo ç›®å½•ä¸‹\nox-hugo å·¥ä½œæµ ox-hugo æœ‰æ”¯æŒä»¥ä¸‹ä¸¤ç§å·¥ä½œæµ\nå• org æ–‡ä»¶çš„å·¥ä½œæµï¼ˆæ¨èï¼‰ é€šè¿‡ org çš„ subtree æ¥å¯¼å‡ºå•ç‹¬çš„æ–‡ç«  å¾ªç¯å¯¼å‡ºæ•´ä¸ª subtree ä¸€ä¸ª org æ–‡ä»¶ä¸€ç¯‡æ–‡ç« çš„å·¥ä½œæµ è¿™æ ·æ“ä½œï¼Œå°±æ²¡æ³•å¾ˆå¥½çš„åˆ©ç”¨ org çš„æ ‡ç­¾ï¼Œä»¥åŠå±æ€§ç»§æ‰¿ç­‰ç‰¹æ€§ï¼Œå¯ä»¥åˆ©ç”¨ å…³é”®å­—æ¥æ ‡è¯†è‰ç¨¿çŠ¶æ€ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 ;; ox-hugo configuration (with-eval-after-load 'org-capture (defun org-hugo-new-subtree-post-capture-template () \"Returns `org-capture' template string for new Hugo post See `org-capture-templates' for more information.\" (let* ((title (read-from-minibuffer \"Post Title: \")) ;Prompt to enter the post title (fname (org-hugo-slug title))) (mapconcat #'identity `( ,(concat \"* TODO \" title) \":PROPERTIES:\" ,(concat \":EXPORT_FILE_NAME: \" fname) \":END:\" \"%?\\n\") ;Place the cursor here finally \"\\n\"))) (add-to-list 'org-capture-templates '(\"h\" ;`org-capture' binding + h \"Hugo post\" entry ;; It is assumed that below file is present in `org-directory' ;; and that it has a \"Blog Ideas\" heading. It can even be a ;; symlink pointing to the actual location of all-posts.org! (file+olp \"all-posts.org\" \"INBOX\") (function org-hugo-new-subtree-post-capture-template)) ) ) åŸºæœ¬çš„å·¥ä½œæµ æ•è·åˆ°çš„åšå®¢æƒ³æ³•ï¼Œåˆ©ç”¨ capture è®°å½•ä¸‹æ¥ï¼Œ\nåˆ©ç”¨ org-roam æ•´ç†ç¬”è®°ä»¥è¾“å‡ºå†…å®¹ï¼Œç­‰æ–‡ç« æ•´ç†å®Œæˆä»¥åï¼Œåˆ©ç”¨ org-refile-copy æŠŠæ•´ä¸ªæ–‡ç« çš„å†…å®¹ refile åˆ° all-post ä¸‹\nç„¶ååˆ©ç”¨ :PROPERTIES: , å•ç‹¬é…ç½®æ–‡ç« çš„ HUGO_SECTION ä»¥åŠ EXPORT_FILE_NAME ç­‰å±æ€§å³å¯å®Œæˆåšå®¢çš„ç¼–å†™\nall-post çš„å®é™…ç»“æ„å¦‚ä¸‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 #+hugo_base_dir: path-to-hugo #+hugo_auto_set_lastmod: t * INBOX ** TODO POST1 IDEA :PROPERTIES: :EXPORT_FILE_NAME: export file :END: ** TODO POST2 IDEA * DONE FINISHED POST :@category:tag1:tag2: * DONE FINISHED POST2 :@category:tag1:tag2: :PROPERTIES: :EXPORT_FILE_NAME: åˆ©ç”¨ emacs + hugo æ­å»ºä¸ªäººåšå®¢ :END: hugo é…ç½®ç¾åŒ– ä¸»é¢˜ç¾åŒ– ä¸»é¢˜é…ç½®ï¼Œå‡†å¤‡ç¯å¢ƒä¸­é€šè¿‡ `git sub module` ä»¥åŠé…ç½®è¿‡ç›¸åº”çš„ä¸»é¢˜äº†ï¼Œç°åœ¨æ¥åˆ‡æ¢ä¸€ä¸ªæ–°ä¸»é¢˜ï¼Œç¾åŒ–ä¸€ä¸‹ blog ä»¥åŠä¼˜åŒ–ä¸€ä¸‹é…ç½®\n1 2 3 cd hugo-dir git submodule add https://github.com/dillonzq/LoveIt.git themes/LoveIt emacs hugo-toml ä¿®æ”¹é…ç½®\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 baseURL = 'https://example.org/' title = 'your title' languageCode = 'zh-CN' languageName = \"ç®€ä½“ä¸­æ–‡\" hasCJKLanguage = true theme = 'LoveIt' [author] name = \"author info\" [menu] [[menu.main]] weight = 1 identifier = \"posts\" # ä½ å¯ä»¥åœ¨åç§° (å…è®¸ HTML æ ¼å¼) ä¹‹å‰æ·»åŠ å…¶ä»–ä¿¡æ¯, ä¾‹å¦‚å›¾æ ‡ pre = \"\" # ä½ å¯ä»¥åœ¨åç§° (å…è®¸ HTML æ ¼å¼) ä¹‹åæ·»åŠ å…¶ä»–ä¿¡æ¯, ä¾‹å¦‚å›¾æ ‡ post = \"\" name = \"æ–‡ç« \" url = \"/posts/\" # å½“ä½ å°†é¼ æ ‡æ‚¬åœåœ¨æ­¤èœå•é“¾æ¥ä¸Šæ—¶, å°†æ˜¾ç¤ºçš„æ ‡é¢˜ title = \"\" [[menu.main]] weight = 2 identifier = \"tags\" pre = \"\" post = \"\" name = \"æ ‡ç­¾\" url = \"/tags/\" title = \"\" [[menu.main]] weight = 3 identifier = \"categories\" pre = \"\" post = \"\" name = \"åˆ†ç±»\" url = \"/categories/\" title = \"\" [markup] # è¯­æ³•é«˜äº®è®¾ç½® (https://gohugo.io/content-management/syntax-highlighting) [markup.highlight] # false is required for LoveIt theme(https://github.com/dillonzq/LoveIt/issues/158) noClasses = false æ›´å¤šä¸»é¢˜ Complete List | Hugo Themes\nBlog å‘å¸ƒ åˆ©ç”¨ Github Pages å‘å¸ƒ Blog ATTACH åœ¨ github åˆ›å»ºä¸€ä¸ª `username.github.io` çš„ `repo` åœ¨ä»“åº“çš„ Settings -\u003e Pages é‡Œä¿®æ”¹ Build and Deployment çš„ Source ä¿®æ”¹ä¸º GitHub Actions\n\u003c_20240219_174337screenshot.png\u003e\nåœ¨æœ¬åœ°çš„ hugo ä»£ç åº“æ“ä½œ\n1 2 3 git remote add origin git@github.com:dreamkidd/dreamkidd.github.io.git git push --set-upstream origin main mkdir -p .github/workflows \u0026\u0026 touch .github/workflows/hugo.yaml å°†ä¸€ä¸‹å†…å®¹ç²˜è´´åˆ° `hugo.yaml` ä¸­\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 # Sample workflow for building and deploying a Hugo site to GitHub Pages name: Deploy Hugo site to Pages on: # Runs on pushes targeting the default branch push: branches: - main # Allows you to run this workflow manually from the Actions tab workflow_dispatch: # Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages permissions: contents: read pages: write id-token: write # Allow only one concurrent deployment, skipping runs queued between the run in-progress and latest queued. # However, do NOT cancel in-progress runs as we want to allow these production deployments to complete. concurrency: group: \"pages\" cancel-in-progress: false # Default to bash defaults: run: shell: bash jobs: # Build job build: runs-on: ubuntu-latest env: HUGO_VERSION: 0.122.0 steps: - name: Install Hugo CLI run: | wget -O ${{ runner.temp }}/hugo.deb https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_extended_${HUGO_VERSION}_linux-amd64.deb \\ \u0026\u0026 sudo dpkg -i ${{ runner.temp }}/hugo.deb - name: Install Dart Sass run: sudo snap install dart-sass - name: Checkout uses: actions/checkout@v4 with: submodules: recursive fetch-depth: 0 - name: Setup Pages id: pages uses: actions/configure-pages@v4 - name: Install Node.js dependencies run: \"[[ -f package-lock.json || -f npm-shrinkwrap.json ]] \u0026\u0026 npm ci || true\" - name: Build with Hugo env: # For maximum backward compatibility with Hugo modules HUGO_ENVIRONMENT: production HUGO_ENV: production run: | hugo \\ --gc \\ --minify \\ --baseURL \"${{ steps.pages.outputs.base_url }}/\" - name: Upload artifact uses: actions/upload-pages-artifact@v2 with: path: ./public # Deployment job deploy: environment: name: github-pages url: ${{ steps.deployment.outputs.page_url }} runs-on: ubuntu-latest needs: build steps: - name: Deploy to GitHub Pages id: deployment uses: actions/deploy-pages@v3 æäº¤ä¸€ä¸‹ä»£ç ï¼ŒæŸ¥çœ‹æ•ˆæœ\nPS: æäº¤ä»£ç åŠ¡å¿…æŠŠ `.github` ä¸ `.gitmodules` åŠ å…¥ git ä»“åº“\nåœ¨ repo çš„ Actions é‡ŒæŸ¥çœ‹ workflow çš„ç»“æœæ˜¯å¦æ­£å¸¸\n\u003c_20240219_174300screenshot.png\u003e\nä»¥åæ¯æ¬¡æäº¤ï¼Œä¼šè‡ªåŠ¨è¿›è¡Œæ„å»ºå‘å¸ƒ Reference The worldâ€™s fastest framework for building websites | Hugo ox-hugo - Org to Hugo exporter GitHub - dillonzq/LoveIt: â¤ï¸A clean, elegant but advanced blog theme for Hugoâ€¦","description":"","tags":["emacs","hugo"],"title":"åˆ©ç”¨ emacs + hugo æ­å»ºä¸ªäººåšå®¢","uri":"/posts/%E5%88%A9%E7%94%A8-emacs-+-hugo-%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"}]
